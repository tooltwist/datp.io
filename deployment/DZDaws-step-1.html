<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Step 1 - Environment | DATP</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600|Open+Sans:400,600;display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="/datp-images/TooltwistLogo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/apple-icon-152x152.png">
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="https://extend.vimeocdn.com/ga/72160148.js" defer="defer"></script>
    <meta name="description" content="DATP - Distributed Aynchronous Transaction Pipelines">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.eae15721.css" as="style"><link rel="preload" href="/assets/js/app.33c9f4d6.js" as="script"><link rel="preload" href="/assets/js/11.9794c269.js" as="script"><link rel="preload" href="/assets/js/83.d13a917a.js" as="script"><link rel="preload" href="/assets/js/28.ec4f1cef.js" as="script"><link rel="prefetch" href="/assets/js/1.7e95004f.js"><link rel="prefetch" href="/assets/js/100.7bcab67f.js"><link rel="prefetch" href="/assets/js/101.eb33c8bd.js"><link rel="prefetch" href="/assets/js/102.185d6f57.js"><link rel="prefetch" href="/assets/js/103.4a7eae43.js"><link rel="prefetch" href="/assets/js/104.ecbd1190.js"><link rel="prefetch" href="/assets/js/105.c1315793.js"><link rel="prefetch" href="/assets/js/106.5c4ef240.js"><link rel="prefetch" href="/assets/js/107.76991de8.js"><link rel="prefetch" href="/assets/js/108.78a76910.js"><link rel="prefetch" href="/assets/js/109.64580bcd.js"><link rel="prefetch" href="/assets/js/110.e37db154.js"><link rel="prefetch" href="/assets/js/111.8a1c8b0c.js"><link rel="prefetch" href="/assets/js/112.cca31b84.js"><link rel="prefetch" href="/assets/js/113.ba183e9c.js"><link rel="prefetch" href="/assets/js/114.4870eef9.js"><link rel="prefetch" href="/assets/js/115.9c17e8ea.js"><link rel="prefetch" href="/assets/js/116.b1329bae.js"><link rel="prefetch" href="/assets/js/117.28471944.js"><link rel="prefetch" href="/assets/js/118.db2bf54f.js"><link rel="prefetch" href="/assets/js/119.e13dd12f.js"><link rel="prefetch" href="/assets/js/12.181e45a3.js"><link rel="prefetch" href="/assets/js/120.ecd33a39.js"><link rel="prefetch" href="/assets/js/121.0226df03.js"><link rel="prefetch" href="/assets/js/122.84b63591.js"><link rel="prefetch" href="/assets/js/123.a11365e9.js"><link rel="prefetch" href="/assets/js/124.245d443f.js"><link rel="prefetch" href="/assets/js/125.b53725c3.js"><link rel="prefetch" href="/assets/js/126.bf52b454.js"><link rel="prefetch" href="/assets/js/127.738a02ab.js"><link rel="prefetch" href="/assets/js/128.5c2e47ab.js"><link rel="prefetch" href="/assets/js/129.91775d24.js"><link rel="prefetch" href="/assets/js/13.dbc10f41.js"><link rel="prefetch" href="/assets/js/130.1153b934.js"><link rel="prefetch" href="/assets/js/131.611ca10e.js"><link rel="prefetch" href="/assets/js/132.38efc7fd.js"><link rel="prefetch" href="/assets/js/133.0561ab2d.js"><link rel="prefetch" href="/assets/js/134.f49b7224.js"><link rel="prefetch" href="/assets/js/135.697864e1.js"><link rel="prefetch" href="/assets/js/136.f98a4bdb.js"><link rel="prefetch" href="/assets/js/137.e91ba0ec.js"><link rel="prefetch" href="/assets/js/138.e0b97f91.js"><link rel="prefetch" href="/assets/js/139.dcefea48.js"><link rel="prefetch" href="/assets/js/14.2c3907f1.js"><link rel="prefetch" href="/assets/js/140.0089d373.js"><link rel="prefetch" href="/assets/js/141.495e42d2.js"><link rel="prefetch" href="/assets/js/142.9988e0fa.js"><link rel="prefetch" href="/assets/js/143.258528d3.js"><link rel="prefetch" href="/assets/js/144.616bad1a.js"><link rel="prefetch" href="/assets/js/145.8a4d2039.js"><link rel="prefetch" href="/assets/js/146.055b73c8.js"><link rel="prefetch" href="/assets/js/147.18a05b4c.js"><link rel="prefetch" href="/assets/js/148.95d2861d.js"><link rel="prefetch" href="/assets/js/149.23793018.js"><link rel="prefetch" href="/assets/js/15.5503fbd3.js"><link rel="prefetch" href="/assets/js/150.d2eb808e.js"><link rel="prefetch" href="/assets/js/151.7ee45428.js"><link rel="prefetch" href="/assets/js/152.d4214553.js"><link rel="prefetch" href="/assets/js/153.663a76b4.js"><link rel="prefetch" href="/assets/js/154.8ee1dab7.js"><link rel="prefetch" href="/assets/js/155.74ee62eb.js"><link rel="prefetch" href="/assets/js/156.61358d57.js"><link rel="prefetch" href="/assets/js/157.d9db29c5.js"><link rel="prefetch" href="/assets/js/158.9ec6b86a.js"><link rel="prefetch" href="/assets/js/159.ac003512.js"><link rel="prefetch" href="/assets/js/16.4a69fc06.js"><link rel="prefetch" href="/assets/js/160.abb35155.js"><link rel="prefetch" href="/assets/js/161.75e4a9f7.js"><link rel="prefetch" href="/assets/js/162.a99d3e61.js"><link rel="prefetch" href="/assets/js/163.717ca18b.js"><link rel="prefetch" href="/assets/js/164.6f18bd35.js"><link rel="prefetch" href="/assets/js/165.13d4a65e.js"><link rel="prefetch" href="/assets/js/166.9719b94b.js"><link rel="prefetch" href="/assets/js/167.575d3766.js"><link rel="prefetch" href="/assets/js/168.af049154.js"><link rel="prefetch" href="/assets/js/169.a039b994.js"><link rel="prefetch" href="/assets/js/17.16eb2f90.js"><link rel="prefetch" href="/assets/js/170.cb123520.js"><link rel="prefetch" href="/assets/js/171.241b85a5.js"><link rel="prefetch" href="/assets/js/172.5c7f942e.js"><link rel="prefetch" href="/assets/js/173.595c3aaa.js"><link rel="prefetch" href="/assets/js/174.426ee699.js"><link rel="prefetch" href="/assets/js/175.ff4477cb.js"><link rel="prefetch" href="/assets/js/176.0d3ce14b.js"><link rel="prefetch" href="/assets/js/177.59596e30.js"><link rel="prefetch" href="/assets/js/178.1f1901c9.js"><link rel="prefetch" href="/assets/js/179.e6486222.js"><link rel="prefetch" href="/assets/js/18.5e443404.js"><link rel="prefetch" href="/assets/js/180.3098b79e.js"><link rel="prefetch" href="/assets/js/181.ff74bde4.js"><link rel="prefetch" href="/assets/js/182.2c581d5e.js"><link rel="prefetch" href="/assets/js/183.d714f92e.js"><link rel="prefetch" href="/assets/js/184.7f3b7958.js"><link rel="prefetch" href="/assets/js/185.80f62ec4.js"><link rel="prefetch" href="/assets/js/186.b4a3923b.js"><link rel="prefetch" href="/assets/js/187.7e7c0534.js"><link rel="prefetch" href="/assets/js/188.871b0a7f.js"><link rel="prefetch" href="/assets/js/189.c61757c8.js"><link rel="prefetch" href="/assets/js/19.3d3fce5f.js"><link rel="prefetch" href="/assets/js/190.54e71055.js"><link rel="prefetch" href="/assets/js/191.198d8197.js"><link rel="prefetch" href="/assets/js/192.c0776953.js"><link rel="prefetch" href="/assets/js/193.fc05ed7c.js"><link rel="prefetch" href="/assets/js/194.fce47f94.js"><link rel="prefetch" href="/assets/js/195.c31370fc.js"><link rel="prefetch" href="/assets/js/196.61772844.js"><link rel="prefetch" href="/assets/js/197.a6842606.js"><link rel="prefetch" href="/assets/js/198.adb638c1.js"><link rel="prefetch" href="/assets/js/199.48d903cf.js"><link rel="prefetch" href="/assets/js/2.ea760195.js"><link rel="prefetch" href="/assets/js/20.0e657b3d.js"><link rel="prefetch" href="/assets/js/200.60496ca3.js"><link rel="prefetch" href="/assets/js/201.abf14b35.js"><link rel="prefetch" href="/assets/js/202.16494de1.js"><link rel="prefetch" href="/assets/js/203.63f8186f.js"><link rel="prefetch" href="/assets/js/204.0746da1e.js"><link rel="prefetch" href="/assets/js/205.d5789643.js"><link rel="prefetch" href="/assets/js/206.9d6af83f.js"><link rel="prefetch" href="/assets/js/207.c0df2397.js"><link rel="prefetch" href="/assets/js/208.ec8c8928.js"><link rel="prefetch" href="/assets/js/209.79847458.js"><link rel="prefetch" href="/assets/js/21.683f305f.js"><link rel="prefetch" href="/assets/js/210.3a9483d4.js"><link rel="prefetch" href="/assets/js/211.5692485a.js"><link rel="prefetch" href="/assets/js/212.166a86a3.js"><link rel="prefetch" href="/assets/js/213.9075c716.js"><link rel="prefetch" href="/assets/js/214.f3d4f649.js"><link rel="prefetch" href="/assets/js/215.2d39fe30.js"><link rel="prefetch" href="/assets/js/216.295e5156.js"><link rel="prefetch" href="/assets/js/217.57688dd8.js"><link rel="prefetch" href="/assets/js/218.75dca5b3.js"><link rel="prefetch" href="/assets/js/219.66e86f48.js"><link rel="prefetch" href="/assets/js/22.63826dca.js"><link rel="prefetch" href="/assets/js/220.e0733238.js"><link rel="prefetch" href="/assets/js/221.6cc54d33.js"><link rel="prefetch" href="/assets/js/222.becbddf7.js"><link rel="prefetch" href="/assets/js/223.2bbfe1a6.js"><link rel="prefetch" href="/assets/js/224.48ab02a5.js"><link rel="prefetch" href="/assets/js/225.3d5fcbfc.js"><link rel="prefetch" href="/assets/js/226.f0b21230.js"><link rel="prefetch" href="/assets/js/227.18e3b4d3.js"><link rel="prefetch" href="/assets/js/228.5e72a2ab.js"><link rel="prefetch" href="/assets/js/23.9601d1cd.js"><link rel="prefetch" href="/assets/js/24.c2eb79c1.js"><link rel="prefetch" href="/assets/js/25.658b9941.js"><link rel="prefetch" href="/assets/js/26.4b6921a9.js"><link rel="prefetch" href="/assets/js/27.a8c565fb.js"><link rel="prefetch" href="/assets/js/29.79139b27.js"><link rel="prefetch" href="/assets/js/3.53782fd9.js"><link rel="prefetch" href="/assets/js/30.d8319f9e.js"><link rel="prefetch" href="/assets/js/31.9a3927f4.js"><link rel="prefetch" href="/assets/js/32.9ea5e497.js"><link rel="prefetch" href="/assets/js/33.40c4cb9b.js"><link rel="prefetch" href="/assets/js/34.4856049d.js"><link rel="prefetch" href="/assets/js/35.348d8e95.js"><link rel="prefetch" href="/assets/js/36.ade36d9b.js"><link rel="prefetch" href="/assets/js/37.b69be42d.js"><link rel="prefetch" href="/assets/js/38.7ad2d08c.js"><link rel="prefetch" href="/assets/js/39.67f337d9.js"><link rel="prefetch" href="/assets/js/4.2c7b0d3b.js"><link rel="prefetch" href="/assets/js/40.730a7fbe.js"><link rel="prefetch" href="/assets/js/41.a6d5ba63.js"><link rel="prefetch" href="/assets/js/42.08822d53.js"><link rel="prefetch" href="/assets/js/43.138507eb.js"><link rel="prefetch" href="/assets/js/44.091726f6.js"><link rel="prefetch" href="/assets/js/45.ae398c8a.js"><link rel="prefetch" href="/assets/js/46.1e4bc650.js"><link rel="prefetch" href="/assets/js/47.3b6ae717.js"><link rel="prefetch" href="/assets/js/48.c765f341.js"><link rel="prefetch" href="/assets/js/49.db11eeee.js"><link rel="prefetch" href="/assets/js/5.6e5cc9cb.js"><link rel="prefetch" href="/assets/js/50.5f96996c.js"><link rel="prefetch" href="/assets/js/51.86e32a01.js"><link rel="prefetch" href="/assets/js/52.a708a377.js"><link rel="prefetch" href="/assets/js/53.1760bc42.js"><link rel="prefetch" href="/assets/js/54.931bb1a8.js"><link rel="prefetch" href="/assets/js/55.b663b9b8.js"><link rel="prefetch" href="/assets/js/56.c18e995d.js"><link rel="prefetch" href="/assets/js/57.34e4061f.js"><link rel="prefetch" href="/assets/js/58.d4421766.js"><link rel="prefetch" href="/assets/js/59.8d276d22.js"><link rel="prefetch" href="/assets/js/6.e3a4b8a2.js"><link rel="prefetch" href="/assets/js/60.ee5d5845.js"><link rel="prefetch" href="/assets/js/61.e471650d.js"><link rel="prefetch" href="/assets/js/62.d508c4f9.js"><link rel="prefetch" href="/assets/js/63.e8c67fb5.js"><link rel="prefetch" href="/assets/js/64.b70c27cc.js"><link rel="prefetch" href="/assets/js/65.b8a86ea8.js"><link rel="prefetch" href="/assets/js/66.ba9dd74a.js"><link rel="prefetch" href="/assets/js/67.8e3105d4.js"><link rel="prefetch" href="/assets/js/68.80cba77e.js"><link rel="prefetch" href="/assets/js/69.553a25af.js"><link rel="prefetch" href="/assets/js/7.8953f970.js"><link rel="prefetch" href="/assets/js/70.f3074e15.js"><link rel="prefetch" href="/assets/js/71.32bd5d6b.js"><link rel="prefetch" href="/assets/js/72.c9e3eeb7.js"><link rel="prefetch" href="/assets/js/73.3cd67d14.js"><link rel="prefetch" href="/assets/js/74.1deb15d4.js"><link rel="prefetch" href="/assets/js/75.3dd79bd7.js"><link rel="prefetch" href="/assets/js/76.cf1b1a43.js"><link rel="prefetch" href="/assets/js/77.296cd543.js"><link rel="prefetch" href="/assets/js/78.34d802e6.js"><link rel="prefetch" href="/assets/js/79.ae9efa47.js"><link rel="prefetch" href="/assets/js/80.a0eade59.js"><link rel="prefetch" href="/assets/js/81.d7f2c802.js"><link rel="prefetch" href="/assets/js/82.86823f81.js"><link rel="prefetch" href="/assets/js/84.27de6ccd.js"><link rel="prefetch" href="/assets/js/85.3ee046ee.js"><link rel="prefetch" href="/assets/js/86.41dbc2c6.js"><link rel="prefetch" href="/assets/js/87.9a1712eb.js"><link rel="prefetch" href="/assets/js/88.cdf17327.js"><link rel="prefetch" href="/assets/js/89.26d6bec6.js"><link rel="prefetch" href="/assets/js/90.9b3c40ed.js"><link rel="prefetch" href="/assets/js/91.4d917d37.js"><link rel="prefetch" href="/assets/js/92.e2d86387.js"><link rel="prefetch" href="/assets/js/93.2fcd06de.js"><link rel="prefetch" href="/assets/js/94.afd973c9.js"><link rel="prefetch" href="/assets/js/95.4a246582.js"><link rel="prefetch" href="/assets/js/96.04169f47.js"><link rel="prefetch" href="/assets/js/97.fbd5cdc5.js"><link rel="prefetch" href="/assets/js/98.4260400a.js"><link rel="prefetch" href="/assets/js/99.febbe420.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.30eb34f0.js"><link rel="prefetch" href="/assets/js/vendors~search-page.b6860559.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eae15721.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/datp-images/TooltwistLogo.png" alt="DATP" class="logo"> <span class="site-name can-hide">DATP</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav> <div id="docsearch"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav>  <ul class="sidebar-links"><li><a href="/deployment/DZDconfiguration.html" class="sidebar-link">Configuration</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Deploying on AWS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/deployment/DZDaws-introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/deployment/DZDaws-step-1.html" aria-current="page" class="active sidebar-link">Step 1 - Environment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/deployment/DZDaws-step-1.html#_1-1-network" class="sidebar-link">1.1 - Network</a></li><li class="sidebar-sub-header"><a href="/deployment/DZDaws-step-1.html#_1-2-jump-boxes" class="sidebar-link">1.2 - Jump Boxes</a></li><li class="sidebar-sub-header"><a href="/deployment/DZDaws-step-1.html#_1-3-keypair" class="sidebar-link">1.3 - Keypair</a></li><li class="sidebar-sub-header"><a href="/deployment/DZDaws-step-1.html#_1-4-ecs-cluster" class="sidebar-link">1.4 - ECS Cluster.</a></li></ul></li><li><a href="/deployment/DZDaws-step-2.html" class="sidebar-link">Step 2 - Database</a></li><li><a href="/deployment/DZDaws-step-3.html" class="sidebar-link">Step 3 - Docker image</a></li><li><a href="/deployment/DZDaws-step-4.html" class="sidebar-link">Step 4 - Master node</a></li><li><a href="/deployment/DZDaws-step-5.html" class="sidebar-link">Step 5 - Availability Monitor</a></li><li><a href="/deployment/DZDaws-step-6.html" class="sidebar-link">Step 6 - Slave nodes</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="step-1-environment"><a href="#step-1-environment" class="header-anchor">#</a> Step 1 - Environment</h1> <h3 id="what-we-ll-be-creating"><a href="#what-we-ll-be-creating" class="header-anchor">#</a> What we'll be creating</h3> <p>What we call an &quot;environment&quot;, is a collection of AWS resources used to deploy one or more applications (in this case, DATP nodes).</p> <p>Each environment is self contained, and protected from the outside world by various security measures.</p> <p>Typically, you might have environments for each other following:</p> <ul><li>development</li> <li>testing</li> <li>staging</li> <li>production</li></ul> <p>The implementation of an environment described here, is an Amazon ECS Cluster running inside a Virtual Private Cloud, compartmentalised into separate subnets and security groups across multiple availability zones. The ECS Hosts and the services they run are not exposed to the public Internet, and can only be accessed
via one of jump boxes this environment sets up <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html" target="_blank" rel="noopener noreferrer">AWS Systems Manager Sessions Manager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>An environment does not provide a database by default, but it does provision the subnets and a security group for any databases (e.g. Aurora) or caches (e.g. REDIS) you will later add to the environment. In a non-production environment you will typically add one database instance, with internal databases assigned for each project you deploy in the environment.</p> <h3 id="before-you-start"><a href="#before-you-start" class="header-anchor">#</a> Before you start</h3> <p>Before you can begin, you will need to choose a name for your environment (not too long!) and also take note of the <em><strong>prefix</strong></em> you will use.</p> <p>In a busy AWS account it can sometimes be difficult to know which person, or which tool, created each of the myriad resources.
To simplify identification, our scripts will prefix the name of each resource whenever possible. We update our Cloudformation scripts
occasionally - these prefixes can also help you determine which environments and project you would like to upgrade.</p> <h3 id="provisioning"><a href="#provisioning" class="header-anchor">#</a> Provisioning</h3> <p>There are multiple stages of provisioning an environment, each utilising it's own Cloudformation template. These steps could be combined into a
single Cloudformation template, but are kept separate to make it easy to customise a particular aspect of the set up. Feel free to download and
modify these templates to create your own customisation. Typical tweaks involve adjustments to use Fargate or other AWS features.</p> <p>Go though the following steps. For each you will need to go to your <a href="https://ap-southeast-1.console.aws.amazon.com/cloudformation/home?region=ap-southeast-1#/stacks" target="_blank" rel="noopener noreferrer">Cloudformation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stacks page. Select <code>Create stack -&gt; with new resources (standard)</code>. Copy in the URL of the template
below and press <em>Next</em> and enter the fields as discussed below.</p> <p>After filling in the fields, skip through the remaining pages, where <strong>no input is required unless specifically mentioned</strong>.</p> <h2 id="_1-1-network"><a href="#_1-1-network" class="header-anchor">#</a> 1.1 - Network</h2> <h4 id="what-this-creates"><a href="#what-this-creates" class="header-anchor">#</a> What this creates</h4> <p>1x Virtual Private Cloud (VPC)</p> <p>1x Internet Gateway</p> <p>2x Public subnets (One in each availability zone)</p> <p>2x Private subnets (One in each availability zone)</p> <p>2x NAT Gateways (One in each availability zone)</p> <p>2x Route tables (One public, one private)</p> <p>1x Load balancer security group</p> <p>1x Application security group</p> <p>1x Database security group</p> <p>1x Database Subnet</p> <p>1x Cache subnet (e.g. for REDIS), in case your application needs it</p> <h4 id="template"><a href="#template" class="header-anchor">#</a> Template</h4> <p><code>https://s3-ap-southeast-1.amazonaws.com/tooltwist.aws-explorer.templates.2020-09-02/11.env-network.cf</code></p> <p><code>2021-11-06/11.env-network.cf</code></p> <h4 id="fields"><a href="#fields" class="header-anchor">#</a> Fields</h4> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>Stack Name</td> <td>EEEEEE-network  (e.g. 'dev-network')</td></tr> <tr><td>Contact Email</td> <td>Who to call if there is a problem</td></tr> <tr><td>Cost Code</td> <td>This can be used to identify resources for billing purposes</td></tr> <tr><td>Environment Name</td> <td>EEEEEE</td></tr> <tr><td>Prefix</td> <td>PPP- (e.g. 'dev-')</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">Important !</p> <p>Please <strong>write down the environment name and prefix</strong> you use, as they must be entered correctly and exactly the same in future steps.
Getting them wrong will cause confusingly named, unusable resources to be created.</p></div> <h2 id="_1-2-jump-boxes"><a href="#_1-2-jump-boxes" class="header-anchor">#</a> 1.2 - Jump Boxes</h2> <p>This creates one EC2 instance as a jump box, in the public subnets, in each of the availability zones.</p> <div class="custom-block warning"><p class="custom-block-title">NOTE: This step is now discouraged</p> <p>Bastion Boxes (Jump boxes) are no longer recommended, since AWS enabled access to instances via SSM (see <a href="https://www.youtube.com/watch?v=dhPtThh-ShI" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://www.youtube.com/watch?v=-ASMtZBrx-k" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for an overview). However in rare circumstances you might want them, so we've left the template and instructions here.</p></div> <h4 id="cloudformation-template"><a href="#cloudformation-template" class="header-anchor">#</a> Cloudformation Template</h4> <p><code>https://s3-ap-southeast-1.amazonaws.com/tooltwist.aws-explorer.templates.2020-04-01/12.env-jumpboxes.cf</code></p> <p><code>2021-11-06/12.env-jumpboxes.cf</code></p> <h4 id="fields-2"><a href="#fields-2" class="header-anchor">#</a> Fields</h4> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>Stack Name</td> <td>EEEEEE-jumpboxes  (e.g. 'dev-jumpboxes')</td></tr> <tr><td>Environment Name</td> <td>EEEEEE</td></tr> <tr><td>Instance Type</td> <td>t2.nano (It's only a jumpbox)</td></tr> <tr><td>Prefix</td> <td>PPP- (e.g. 'v1-')</td></tr></tbody></table> <h2 id="_1-3-keypair"><a href="#_1-3-keypair" class="header-anchor">#</a> 1.3 - Keypair</h2> <p>Before you create an environment in AWS, you will need a <em><strong>keypair</strong></em>.</p> <p>The keypair allows you to log into the AWS server instances you create. The following steps must be completed using the AWS Dashboard. You'll create the keypair, then download and install it on your machine. Don't lose this file, or you will not be able to login to the environment you create.</p> <p>In the commands below replace the <code>ppp</code> with your prefix (e.g. j-) and <code>eeeee</code> below with your environment name.
This example is for Singapore (ap-southeast-1) but feel free to change
this to <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions" target="_blank" rel="noopener noreferrer">another AWS region<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>a) Go to the <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/v2/home?region=ap-southeast-1#KeyPairs:sort=keyName" target="_blank" rel="noopener noreferrer">Keypairs page of the AWS console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>b) Create a key pair with the RSA and .pem options selected, named <code>ppp-eeeee-region</code>. For example <code>j-dev-ap-southeast-1</code> or <code>acme-prod-us-east-1</code>.</p> <p>c) The keypair should be automatically downloaded to you machine, where you can install it:</p> <div class="language- extra-class"><pre><code>  $ mv ~/Downloads/ppp-eeeee-ap-southeast-1.pem ~/.ssh
  $ chmod 600 ~/.ssh/ppp-eeeee-ap-southeast-1.pem
</code></pre></div><p>d) On a Mac you'll need to remove the extended attributes.</p> <div class="language- extra-class"><pre><code>$ xattr -d com.apple.metadata:kMDItemWhereFroms ~/.ssh/ppp-eeeee-ap-southeast-1.pem
$ xattr -d com.apple.quarantine ~/.ssh/ppp-eeeee-ap-southeast-1.pem
</code></pre></div><h2 id="_1-4-ecs-cluster"><a href="#_1-4-ecs-cluster" class="header-anchor">#</a> 1.4 - ECS Cluster.</h2> <p>1x Role definition for the ECS services.</p> <p>1x ECS Cluster</p> <p>1x Autoscaling group</p> <p>1x Launch Configuration</p> <h4 id="cloudformation-template-2"><a href="#cloudformation-template-2" class="header-anchor">#</a> Cloudformation Template</h4> <p><code>https://s3-ap-southeast-1.amazonaws.com/tooltwist.aws-explorer.templates.2021-05-10/12.env-ecs-cluster.cf</code></p> <p><code>2021-11-06/13.env-ecs-cluster.cf</code></p> <h4 id="fields-3"><a href="#fields-3" class="header-anchor">#</a> Fields</h4> <table><thead><tr><th>Field</th> <th>Description</th></tr></thead> <tbody><tr><td>Stack Name</td> <td>EEEEEE-cluster  (e.g. 'dev-cluster')</td></tr> <tr><td>Cluster size</td> <td>How many EC2 instances do you want in the cluster? If unsure start with 1</td></tr> <tr><td>Environment Name</td> <td>EEEEEE</td></tr> <tr><td>Instance Type</td> <td>Choose an EC2 size appropriate for the environment's purpose</td></tr> <tr><td>Prefix</td> <td>PPP- (e.g. 'v1-')</td></tr></tbody></table> <p>On the final page, select <em>I acknowledge that AWS CloudFormation might create IAM resources</em> and create the stack.</p></div> <footer class="page-edit" data-v-656dfe6a><div class="container" data-v-656dfe6a><p data-v-656dfe6a>
      Deployed on
      <a href="https://pages.github.com/" data-v-656dfe6a>Github Pages</a>.
       <br data-v-656dfe6a> <span class="prefix" data-v-656dfe6a>Last updated:</span> <span class="time" data-v-656dfe6a>2022-07-13, 05:12:23 UTC</span></p></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/deployment/DZDaws-introduction.html" class="prev">Introduction</a></span> <span class="next"><a href="/deployment/DZDaws-step-2.html">Step 2 - Database</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.33c9f4d6.js" defer></script><script src="/assets/js/11.9794c269.js" defer></script><script src="/assets/js/83.d13a917a.js" defer></script><script src="/assets/js/28.ec4f1cef.js" defer></script>
  </body>
</html>
