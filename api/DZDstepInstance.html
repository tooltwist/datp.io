<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>class StepInstance | DATP</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600|Open+Sans:400,600;display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="/datp-images/TooltwistLogo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/apple-icon-152x152.png">
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="https://extend.vimeocdn.com/ga/72160148.js" defer="defer"></script>
    <meta name="description" content="DATP - Distributed Aynchronous Transaction Pipelines">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.1e0e1b88.css" as="style"><link rel="preload" href="/assets/js/app.96c8d89b.js" as="script"><link rel="preload" href="/assets/js/11.9794c269.js" as="script"><link rel="preload" href="/assets/js/57.34e4061f.js" as="script"><link rel="preload" href="/assets/js/28.ec4f1cef.js" as="script"><link rel="prefetch" href="/assets/js/1.7e95004f.js"><link rel="prefetch" href="/assets/js/100.7b5f279a.js"><link rel="prefetch" href="/assets/js/101.8088a01a.js"><link rel="prefetch" href="/assets/js/102.a2707c46.js"><link rel="prefetch" href="/assets/js/103.610d48ba.js"><link rel="prefetch" href="/assets/js/104.ecbd1190.js"><link rel="prefetch" href="/assets/js/105.900611b7.js"><link rel="prefetch" href="/assets/js/106.5793ab06.js"><link rel="prefetch" href="/assets/js/107.a7fe6820.js"><link rel="prefetch" href="/assets/js/108.a04b80ab.js"><link rel="prefetch" href="/assets/js/109.70f2d20c.js"><link rel="prefetch" href="/assets/js/110.d27acda2.js"><link rel="prefetch" href="/assets/js/111.a718f44b.js"><link rel="prefetch" href="/assets/js/112.4b701799.js"><link rel="prefetch" href="/assets/js/113.a3c2eaab.js"><link rel="prefetch" href="/assets/js/114.560b46bb.js"><link rel="prefetch" href="/assets/js/115.65468bf5.js"><link rel="prefetch" href="/assets/js/116.74778fac.js"><link rel="prefetch" href="/assets/js/117.06524759.js"><link rel="prefetch" href="/assets/js/118.ab6ab93f.js"><link rel="prefetch" href="/assets/js/119.d940e4ad.js"><link rel="prefetch" href="/assets/js/12.181e45a3.js"><link rel="prefetch" href="/assets/js/120.3978c798.js"><link rel="prefetch" href="/assets/js/121.e5dde80c.js"><link rel="prefetch" href="/assets/js/122.f37a9796.js"><link rel="prefetch" href="/assets/js/123.a11365e9.js"><link rel="prefetch" href="/assets/js/124.61342c7f.js"><link rel="prefetch" href="/assets/js/125.f0f1967c.js"><link rel="prefetch" href="/assets/js/126.1356508c.js"><link rel="prefetch" href="/assets/js/127.f16f1b45.js"><link rel="prefetch" href="/assets/js/128.5c2e47ab.js"><link rel="prefetch" href="/assets/js/129.91775d24.js"><link rel="prefetch" href="/assets/js/13.98c968c4.js"><link rel="prefetch" href="/assets/js/130.e45b0936.js"><link rel="prefetch" href="/assets/js/131.c5c07aed.js"><link rel="prefetch" href="/assets/js/132.2ce4c3e9.js"><link rel="prefetch" href="/assets/js/133.7c57901a.js"><link rel="prefetch" href="/assets/js/134.f49b7224.js"><link rel="prefetch" href="/assets/js/135.d5616ac6.js"><link rel="prefetch" href="/assets/js/136.d849ffd6.js"><link rel="prefetch" href="/assets/js/137.b573a6ad.js"><link rel="prefetch" href="/assets/js/138.56258355.js"><link rel="prefetch" href="/assets/js/139.aad4bbf6.js"><link rel="prefetch" href="/assets/js/14.987a7b0c.js"><link rel="prefetch" href="/assets/js/140.189371a6.js"><link rel="prefetch" href="/assets/js/141.495e42d2.js"><link rel="prefetch" href="/assets/js/142.23461167.js"><link rel="prefetch" href="/assets/js/143.121d7dc0.js"><link rel="prefetch" href="/assets/js/144.616bad1a.js"><link rel="prefetch" href="/assets/js/145.a183053d.js"><link rel="prefetch" href="/assets/js/146.81ae4123.js"><link rel="prefetch" href="/assets/js/147.18a05b4c.js"><link rel="prefetch" href="/assets/js/148.1e2e1642.js"><link rel="prefetch" href="/assets/js/149.23793018.js"><link rel="prefetch" href="/assets/js/15.88fd3a8b.js"><link rel="prefetch" href="/assets/js/150.e5ab05fa.js"><link rel="prefetch" href="/assets/js/151.2fde1428.js"><link rel="prefetch" href="/assets/js/152.0d9cd120.js"><link rel="prefetch" href="/assets/js/153.491e5c0e.js"><link rel="prefetch" href="/assets/js/154.8ee1dab7.js"><link rel="prefetch" href="/assets/js/155.102f5e8b.js"><link rel="prefetch" href="/assets/js/156.452ef410.js"><link rel="prefetch" href="/assets/js/157.76bdd568.js"><link rel="prefetch" href="/assets/js/158.7f0db036.js"><link rel="prefetch" href="/assets/js/159.a4a4cf1b.js"><link rel="prefetch" href="/assets/js/16.6090ffcb.js"><link rel="prefetch" href="/assets/js/160.21b43598.js"><link rel="prefetch" href="/assets/js/161.3afc4bd2.js"><link rel="prefetch" href="/assets/js/162.75b81d23.js"><link rel="prefetch" href="/assets/js/163.78d3058f.js"><link rel="prefetch" href="/assets/js/164.6f18bd35.js"><link rel="prefetch" href="/assets/js/165.c58c7885.js"><link rel="prefetch" href="/assets/js/166.9719b94b.js"><link rel="prefetch" href="/assets/js/167.c35776e2.js"><link rel="prefetch" href="/assets/js/168.ff44094f.js"><link rel="prefetch" href="/assets/js/169.97199c11.js"><link rel="prefetch" href="/assets/js/17.16eb2f90.js"><link rel="prefetch" href="/assets/js/170.722e84c7.js"><link rel="prefetch" href="/assets/js/171.50470ebd.js"><link rel="prefetch" href="/assets/js/172.73a0ea3b.js"><link rel="prefetch" href="/assets/js/173.1eda63fb.js"><link rel="prefetch" href="/assets/js/174.83917e43.js"><link rel="prefetch" href="/assets/js/175.e11d5e48.js"><link rel="prefetch" href="/assets/js/176.71d5cc56.js"><link rel="prefetch" href="/assets/js/177.db126c96.js"><link rel="prefetch" href="/assets/js/178.2e5200f4.js"><link rel="prefetch" href="/assets/js/179.2dcffe3c.js"><link rel="prefetch" href="/assets/js/18.5e443404.js"><link rel="prefetch" href="/assets/js/180.3098b79e.js"><link rel="prefetch" href="/assets/js/181.9f4c19e3.js"><link rel="prefetch" href="/assets/js/182.2c581d5e.js"><link rel="prefetch" href="/assets/js/183.19cb9b29.js"><link rel="prefetch" href="/assets/js/184.fc121b8a.js"><link rel="prefetch" href="/assets/js/185.21d5df6a.js"><link rel="prefetch" href="/assets/js/186.02735562.js"><link rel="prefetch" href="/assets/js/187.13b23f74.js"><link rel="prefetch" href="/assets/js/188.871b0a7f.js"><link rel="prefetch" href="/assets/js/189.ad2dbbc4.js"><link rel="prefetch" href="/assets/js/19.3d3fce5f.js"><link rel="prefetch" href="/assets/js/190.8bd38138.js"><link rel="prefetch" href="/assets/js/191.198d8197.js"><link rel="prefetch" href="/assets/js/192.1c597c6a.js"><link rel="prefetch" href="/assets/js/193.63daa1aa.js"><link rel="prefetch" href="/assets/js/194.74ed235d.js"><link rel="prefetch" href="/assets/js/195.c31370fc.js"><link rel="prefetch" href="/assets/js/196.ef493613.js"><link rel="prefetch" href="/assets/js/197.a6842606.js"><link rel="prefetch" href="/assets/js/198.adb638c1.js"><link rel="prefetch" href="/assets/js/199.5774476c.js"><link rel="prefetch" href="/assets/js/2.4c9cebbf.js"><link rel="prefetch" href="/assets/js/20.0e657b3d.js"><link rel="prefetch" href="/assets/js/200.66f0b965.js"><link rel="prefetch" href="/assets/js/201.abf14b35.js"><link rel="prefetch" href="/assets/js/202.468228bd.js"><link rel="prefetch" href="/assets/js/203.63f8186f.js"><link rel="prefetch" href="/assets/js/204.30eff7de.js"><link rel="prefetch" href="/assets/js/205.4035af12.js"><link rel="prefetch" href="/assets/js/206.d03cb4a3.js"><link rel="prefetch" href="/assets/js/207.c8237a70.js"><link rel="prefetch" href="/assets/js/208.ad1fd574.js"><link rel="prefetch" href="/assets/js/209.79847458.js"><link rel="prefetch" href="/assets/js/21.683f305f.js"><link rel="prefetch" href="/assets/js/210.6bff4a9e.js"><link rel="prefetch" href="/assets/js/211.5692485a.js"><link rel="prefetch" href="/assets/js/212.c739d8d9.js"><link rel="prefetch" href="/assets/js/213.9075c716.js"><link rel="prefetch" href="/assets/js/214.9d0406c0.js"><link rel="prefetch" href="/assets/js/215.2d39fe30.js"><link rel="prefetch" href="/assets/js/216.ed9b04a7.js"><link rel="prefetch" href="/assets/js/217.7989eb53.js"><link rel="prefetch" href="/assets/js/218.4459a77c.js"><link rel="prefetch" href="/assets/js/219.66e86f48.js"><link rel="prefetch" href="/assets/js/22.37991c24.js"><link rel="prefetch" href="/assets/js/220.5155a8a3.js"><link rel="prefetch" href="/assets/js/221.21b780fc.js"><link rel="prefetch" href="/assets/js/222.5231eaba.js"><link rel="prefetch" href="/assets/js/223.2bbfe1a6.js"><link rel="prefetch" href="/assets/js/224.902bc25f.js"><link rel="prefetch" href="/assets/js/225.5da79aac.js"><link rel="prefetch" href="/assets/js/226.f0b21230.js"><link rel="prefetch" href="/assets/js/227.63a23441.js"><link rel="prefetch" href="/assets/js/228.18a6770e.js"><link rel="prefetch" href="/assets/js/229.370c71fe.js"><link rel="prefetch" href="/assets/js/23.9601d1cd.js"><link rel="prefetch" href="/assets/js/230.1d37a624.js"><link rel="prefetch" href="/assets/js/231.b0427468.js"><link rel="prefetch" href="/assets/js/232.ddaef15c.js"><link rel="prefetch" href="/assets/js/233.bba6caea.js"><link rel="prefetch" href="/assets/js/234.a944a95a.js"><link rel="prefetch" href="/assets/js/235.ae50fa96.js"><link rel="prefetch" href="/assets/js/236.cfb49c59.js"><link rel="prefetch" href="/assets/js/237.753a9415.js"><link rel="prefetch" href="/assets/js/238.584ff1a5.js"><link rel="prefetch" href="/assets/js/239.a29fadef.js"><link rel="prefetch" href="/assets/js/24.b211565b.js"><link rel="prefetch" href="/assets/js/240.550611c4.js"><link rel="prefetch" href="/assets/js/241.7e23a954.js"><link rel="prefetch" href="/assets/js/242.62b5cfe4.js"><link rel="prefetch" href="/assets/js/243.30d18943.js"><link rel="prefetch" href="/assets/js/244.39cdb125.js"><link rel="prefetch" href="/assets/js/245.f3df432b.js"><link rel="prefetch" href="/assets/js/246.91c235ed.js"><link rel="prefetch" href="/assets/js/247.4058f8b3.js"><link rel="prefetch" href="/assets/js/248.f4c3adf5.js"><link rel="prefetch" href="/assets/js/249.c6dd8c68.js"><link rel="prefetch" href="/assets/js/25.658b9941.js"><link rel="prefetch" href="/assets/js/250.d6d1171c.js"><link rel="prefetch" href="/assets/js/251.925b968f.js"><link rel="prefetch" href="/assets/js/252.55fb900c.js"><link rel="prefetch" href="/assets/js/253.f49fbc2e.js"><link rel="prefetch" href="/assets/js/254.f939f80b.js"><link rel="prefetch" href="/assets/js/255.5f995844.js"><link rel="prefetch" href="/assets/js/256.d80d555c.js"><link rel="prefetch" href="/assets/js/26.a419c574.js"><link rel="prefetch" href="/assets/js/27.ff552d78.js"><link rel="prefetch" href="/assets/js/29.79139b27.js"><link rel="prefetch" href="/assets/js/3.f37bedd0.js"><link rel="prefetch" href="/assets/js/30.d8319f9e.js"><link rel="prefetch" href="/assets/js/31.9a3927f4.js"><link rel="prefetch" href="/assets/js/32.9ea5e497.js"><link rel="prefetch" href="/assets/js/33.a4b51f80.js"><link rel="prefetch" href="/assets/js/34.0744883c.js"><link rel="prefetch" href="/assets/js/35.348d8e95.js"><link rel="prefetch" href="/assets/js/36.ade36d9b.js"><link rel="prefetch" href="/assets/js/37.0bebc7d4.js"><link rel="prefetch" href="/assets/js/38.0a34703a.js"><link rel="prefetch" href="/assets/js/39.67f337d9.js"><link rel="prefetch" href="/assets/js/4.6ac22d55.js"><link rel="prefetch" href="/assets/js/40.d5ff806a.js"><link rel="prefetch" href="/assets/js/41.b1014477.js"><link rel="prefetch" href="/assets/js/42.cb4ff247.js"><link rel="prefetch" href="/assets/js/43.138507eb.js"><link rel="prefetch" href="/assets/js/44.091726f6.js"><link rel="prefetch" href="/assets/js/45.256f0ba1.js"><link rel="prefetch" href="/assets/js/46.57b3a359.js"><link rel="prefetch" href="/assets/js/47.3b6ae717.js"><link rel="prefetch" href="/assets/js/48.15616e68.js"><link rel="prefetch" href="/assets/js/49.db11eeee.js"><link rel="prefetch" href="/assets/js/5.c6098f04.js"><link rel="prefetch" href="/assets/js/50.9527ffd1.js"><link rel="prefetch" href="/assets/js/51.86e32a01.js"><link rel="prefetch" href="/assets/js/52.a708a377.js"><link rel="prefetch" href="/assets/js/53.f79d7c20.js"><link rel="prefetch" href="/assets/js/54.225d4e6f.js"><link rel="prefetch" href="/assets/js/55.695da4fe.js"><link rel="prefetch" href="/assets/js/56.c18e995d.js"><link rel="prefetch" href="/assets/js/58.6106d582.js"><link rel="prefetch" href="/assets/js/59.9be34dec.js"><link rel="prefetch" href="/assets/js/6.e3a4b8a2.js"><link rel="prefetch" href="/assets/js/60.ee5d5845.js"><link rel="prefetch" href="/assets/js/61.b2ceb24d.js"><link rel="prefetch" href="/assets/js/62.d508c4f9.js"><link rel="prefetch" href="/assets/js/63.e8c67fb5.js"><link rel="prefetch" href="/assets/js/64.b70c27cc.js"><link rel="prefetch" href="/assets/js/65.4c14aa77.js"><link rel="prefetch" href="/assets/js/66.b005fe31.js"><link rel="prefetch" href="/assets/js/67.867f4452.js"><link rel="prefetch" href="/assets/js/68.d180e3b3.js"><link rel="prefetch" href="/assets/js/69.bb7b116b.js"><link rel="prefetch" href="/assets/js/7.c23d6fb5.js"><link rel="prefetch" href="/assets/js/70.f3074e15.js"><link rel="prefetch" href="/assets/js/71.3c493b84.js"><link rel="prefetch" href="/assets/js/72.feac74fd.js"><link rel="prefetch" href="/assets/js/73.9841c07f.js"><link rel="prefetch" href="/assets/js/74.f94b00de.js"><link rel="prefetch" href="/assets/js/75.f4af4ea4.js"><link rel="prefetch" href="/assets/js/76.800063f2.js"><link rel="prefetch" href="/assets/js/77.a8b33c60.js"><link rel="prefetch" href="/assets/js/78.6e9bc75f.js"><link rel="prefetch" href="/assets/js/79.fb661730.js"><link rel="prefetch" href="/assets/js/80.3e8e696b.js"><link rel="prefetch" href="/assets/js/81.e08e2da4.js"><link rel="prefetch" href="/assets/js/82.34d94184.js"><link rel="prefetch" href="/assets/js/83.d13a917a.js"><link rel="prefetch" href="/assets/js/84.09cfc0d9.js"><link rel="prefetch" href="/assets/js/85.3ee046ee.js"><link rel="prefetch" href="/assets/js/86.48834b04.js"><link rel="prefetch" href="/assets/js/87.51e661d8.js"><link rel="prefetch" href="/assets/js/88.c6bd90f6.js"><link rel="prefetch" href="/assets/js/89.26d6bec6.js"><link rel="prefetch" href="/assets/js/90.253cb7be.js"><link rel="prefetch" href="/assets/js/91.87124049.js"><link rel="prefetch" href="/assets/js/92.85c5685a.js"><link rel="prefetch" href="/assets/js/93.8de279b6.js"><link rel="prefetch" href="/assets/js/94.afd973c9.js"><link rel="prefetch" href="/assets/js/95.00e04899.js"><link rel="prefetch" href="/assets/js/96.eabafd72.js"><link rel="prefetch" href="/assets/js/97.680a8fc8.js"><link rel="prefetch" href="/assets/js/98.ee5a8394.js"><link rel="prefetch" href="/assets/js/99.247a52b0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.30eb34f0.js"><link rel="prefetch" href="/assets/js/vendors~search-page.b6860559.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e0e1b88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/datp-images/TooltwistLogo.png" alt="DATP" class="logo"> <span class="site-name can-hide">DATP</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/tutorial/introduction.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav> <div id="docsearch"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/tutorial/introduction.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav>  <ul class="sidebar-links"><li><a href="/api/DZDDATP.html" class="sidebar-link">DATP package</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Classes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/DZDstepInstance.html" aria-current="page" class="active sidebar-link">class StepInstance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#aborted" class="sidebar-link">aborted</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#baddefinition" class="sidebar-link">badDefinition</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#debug" class="sidebar-link">debug</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#error" class="sidebar-link">error</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#exceptioninstep" class="sidebar-link">exceptionInStep</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#failed" class="sidebar-link">failed</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getdataasjson" class="sidebar-link">getDataAsJson</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getdataasobject" class="sidebar-link">getDataAsObject</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getlevel" class="sidebar-link">getLevel</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getmetadata" class="sidebar-link">getMetadata</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getnodegroup" class="sidebar-link">getNodeGroup</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getnodeid" class="sidebar-link">getNodeId</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getstepid" class="sidebar-link">getStepId</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getstepobject" class="sidebar-link">getStepObject</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getsteptype" class="sidebar-link">getStepType</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#getswitch" class="sidebar-link">getSwitch</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#gettxdata" class="sidebar-link">getTxData</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#gettxid" class="sidebar-link">getTxId</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#progressreport" class="sidebar-link">progressReport</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#retrylater" class="sidebar-link">retryLater</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#succeeded" class="sidebar-link">succeeded</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#trace" class="sidebar-link">trace</a></li><li class="sidebar-sub-header"><a href="/api/DZDstepInstance.html#warning" class="sidebar-link">warning</a></li></ul></li><li><a href="/api/DZDstep.html" class="sidebar-link">class Step</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Variables</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/DZDDATPextras.html" class="sidebar-link">DATP/extras</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="class-stepinstance"><a href="#class-stepinstance" class="header-anchor">#</a> class StepInstance</h1> <p>Most of the step functions receive a <strong>StepInstance</strong> parameter, which provides the context of the step being run, and also gives access to various functions related
to the step being run.</p> <p>The step's <code>invoke</code> and <code>rollback</code> functions use this 'instance' object to
interact wih the DATP infrastructure:</p> <ul><li>the get the input data</li> <li>to perform logging and provide an audit trail.</li> <li>to return the status when the step finishes.</li></ul> <p>The following functions are used to perform these actions.</p> <h2 id="aborted"><a href="#aborted" class="header-anchor">#</a> aborted</h2> <ul><li><p><code>{Object} note</code></p></li> <li><p><code>{Object|String} output</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li><code>{Promise} no return value</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Finish the step, with status <code>Step.ABORTED</code></p> <p>Call this when the step was unable to complete its purpose, and the pipeline
must not proceed. An aborted pipeline will NOT try to rollback previously completed
steps. The output can be used to report details of the error.</p> <blockquote><p>Note: it is essential that you <code>return await instance.aborted(...)</code> so
the function has a chance to complete, and so you return without further processing.</p></blockquote></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>some backend error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">aborted</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not contact ACME API</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="baddefinition"><a href="#baddefinition" class="header-anchor">#</a> badDefinition</h2> <ul><li><p><code>{Object} note</code></p></li> <li><p><code>{Object|String} output</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li><code>{Promise} no return value</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>This function should be used when a step encounters a definition it does not
understand, or that is missing required information.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">CustomStep</span> <span class="token keyword">extends</span> <span class="token class-name">Step</span> <span class="token punctuation">{</span>
  #definition

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">definition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>definition<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#definition <span class="token operator">=</span> definition
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#definition<span class="token punctuation">.</span>costCode<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">badDefinition</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Missing parameter [codeCode]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#definition<span class="token punctuation">.</span>sleepTime <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">badDefinition</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sleep time must be greater than 100ms [sleepTime]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// All okay, proceed on...</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="debug"><a href="#debug" class="header-anchor">#</a> debug</h2> <ul><li><p><strong>Arguments:</strong></p> <ul><li><code>{String, String, ...} message</code></li> <li><code>{String} source (Optional)</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Write a debug-level log message to the log of the current step.
This function takes an arbitrary number of arguments.</p> <p>The 'source' argument is not normally provided and defaults to
Transaction.LOG_SOURCE_INVOKE or Transaction.LOG_SOURCE_ROLLBACK depending upon
whether the pipeline is currently progressing forward or rolling back.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'value='</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="error"><a href="#error" class="header-anchor">#</a> error</h2> <ul><li><p><strong>Arguments:</strong></p> <ul><li><code>{String, String, ...} message</code></li> <li><code>{String} source (Optional)</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Write an error-level log message to the log of the current step.
This function takes an arbitrary number of arguments.</p> <p>The 'source' argument is not normally provided and defaults to
Transaction.LOG_SOURCE_INVOKE or Transaction.LOG_SOURCE_ROLLBACK depending upon
whether the pipeline is currently progressing forward or rolling back.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'value='</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="exceptioninstep"><a href="#exceptioninstep" class="header-anchor">#</a> exceptionInStep</h2> <ul><li><p><strong>Arguments:</strong></p> <ul><li><code>{String} message</code></li> <li><code>{Error} error</code></li></ul></li> <li><p><strong>Returns:</strong></p> <ul><li><code>{Promise} no return value</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Finish the step, with status <code>Step.EXCEPTION</code></p> <p>This function is called when a logic error occurs while a step is processing. This
could be an exception in your user code, or a system error throwing an exception.
This function is not always called by user code - it will also be called by the
pipeline to handle uncaught exceptions within the user code.</p> <p>DATP treats exceptions as an unrecoverable error. It does not know what might have
been completed, or whether to continue on to the next step or to rollback previous
steps. Consequently it treats exceptions as an abort, that will require
investigation and possible manual correction of the transaction.</p> <blockquote><p>Note: it is essential that you <code>return await instance.exceptionInStep(...)</code> so
the function has a chance to complete, and so you return without further processing.</p></blockquote></li> <li><p><strong>Example:</strong></p></li></ul> <p>The following three cases will all result in a step exception, with the step
(and pipeline) being aborted.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Case 1 - Explicitly specify the step exception status.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Exception while ....</span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">exceptionInStep</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Case 2 - DATP catches a throw exception</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;I don't like Mondays&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">// Case 3 - DATP catches an unintended exception</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span>unknown <span class="token comment">// &quot;Invalid property of undefined&quot; exception</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="failed"><a href="#failed" class="header-anchor">#</a> failed</h2> <ul><li><p><code>{Object} note</code></p></li> <li><p><code>{Object|String} output</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li><code>{Promise} no return value</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Finish the step, with status <code>Step.FAILED</code></p> <p>Call this when the step was unable to complete its purpose, and the pipeline
must not proceed. The pipeline will then try to rollback previously completed
steps. The output can be used to report details of the error.</p> <blockquote><p>Note: it is essential that you <code>return await instance.failed(...)</code> so
the function has a chance to complete, and so you return without further processing.</p></blockquote></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>some backend error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">failed</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Could not contact ACME API</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getdataasjson"><a href="#getdataasjson" class="header-anchor">#</a> getDataAsJson</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>The input data for the current step, as a JSON string</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Every step has input and output, and the input may be accessed as
JSON or as a Javascript object. This function returns the input data as JSON.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If your application code does not need to modify the input data but wishes
to view it and JSON is acceptable, it is preferable to use this function over <code>getDataAsObject</code> and avoid the overhead of parsing the data.</p></div></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> json <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getDataAsJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">succeeded</span><span class="token punctuation">(</span><span class="token string">'Greetings!'</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getdataasobject"><a href="#getdataasobject" class="header-anchor">#</a> getDataAsObject</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>The input data for the current step, as a javascript object</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Every step has input and output, and the input may be accessed as
JSON or as a Javascript object. This function returns the input data as an object.
Your application code can modify this object and pass it to its output.</p> <p>Note that as a security measure data is converted to JSON and back between
steps, to ensure that only data can pass between steps.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getDataAsObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// Case 1 - This will pass to the next step</span>
    data<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'bar'</span>

    <span class="token comment">// This function will NOT pass to the next step</span>
    data<span class="token punctuation">.</span><span class="token function-variable function">nasty1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token comment">// This dangerous getter/setter will NOT pass to the next step</span>
    data<span class="token punctuation">.</span>nasty2 <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">get</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">succeeded</span><span class="token punctuation">(</span><span class="token string">'Greetings!'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getlevel"><a href="#getlevel" class="header-anchor">#</a> getLevel</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>The current level of nesting</li></ul></li> <li><p><strong>Usage:</strong></p> <p>A transaction invokes a pipeline step (level 0) which invokes an
application step (level 1) which may invoke another pipeline (level 2),
and so on.</p> <p>The level may be useful for indenting messages to the console while debugging.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> level <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 2</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getmetadata"><a href="#getmetadata" class="header-anchor">#</a> getMetadata</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>The metadata for the current transaction</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Each transaction contains data of two types.
The metadata contains information related to the processing of the transaction,
that is not actually data of the transaction. For example, details of the current user,
and the type of polling for the transaction's reply.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> metadata <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// {</span>
      <span class="token literal-property property">tenant</span><span class="token operator">:</span> <span class="token string">'acme'</span><span class="token punctuation">,</span>

    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getnodegroup"><a href="#getnodegroup" class="header-anchor">#</a> getNodeGroup</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{String} The node group of the current step.</li></ul></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nodeGroup <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getNodeGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 'master'</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getnodeid"><a href="#getnodeid" class="header-anchor">#</a> getNodeId</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{String} The ID of the node where this step is running.</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Each pipeline runs on a node, and the nodes are grouped in &quot;node groups&quot;.
The nodes in a group all run the same code and feed from the same transaction
queue, to provide scaling and redundancy.</p> <p>The node ID identifies a specific instance of a node.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nodeId <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getNodeId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// node-070f86ffec01bfbff98847dc59d1cbc8a71f564d</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getstepid"><a href="#getstepid" class="header-anchor">#</a> getStepId</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{String} Get the step ID of the current step</li></ul></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stepID <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getStepId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// step-070f86ffec01bfbff98847dc59d1cbc8a71f564d</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getstepobject"><a href="#getstepobject" class="header-anchor">#</a> getStepObject</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{Object} The currently running step (step, not step instance)</li></ul></li> <li><p><strong>Usage:</strong></p> <p>This is isn't typically required in user code, as the step already knows who it is.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> me <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getStepObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// me === this</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getsteptype"><a href="#getsteptype" class="header-anchor">#</a> getStepType</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{String} The type of the current step</li></ul></li> <li><p><strong>Usage:</strong></p> <p>This is isn't typically required in user code, as the step actually registers
it's own name.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myType <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getStepType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// my.exampleStep</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="getswitch"><a href="#getswitch" class="header-anchor">#</a> getSwitch</h2> <ul><li><p><code>{String} name</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li>{String} The value of the named switch.</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Each transaction can have 'switches' set.
Each switch has a name and a value, and for simlicity sake the value is typically true or false.
The values of switches can be set from routes, steps, or other places, and
are typically watched by steps waiting for some event to occur.</p> <p>For example, a pipeline might start a transaction on a backend system, and then go to sleep
until the backend uses a web hook to notify that it has completed processing.\</p> <p>The 'instance.retryLater' method can be used to put a step alseep, while it waits for a switch to be set.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">getSwitch</span><span class="token punctuation">(</span><span class="token string">'processing-finished'</span><span class="token punctuation">)</span>
    <span class="token comment">// false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      instance<span class="token punctuation">.</span><span class="token function">progressReport</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'Waiting for backend processing to complete'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">retryLater</span><span class="token punctuation">(</span><span class="token string">'processing-finished'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    <span class="token comment">// Back end processing is finished - e.g. a webhook route set the switch</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="gettxdata"><a href="#gettxdata" class="header-anchor">#</a> getTxData</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>The data for the current transaction</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Each transaction contains data of two types.
The metadata contains information related to the processing of the transaction,
that is not actually data of the transaction, and then there is the actual
transaction data.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> txData <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getTxData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// {</span>
    <span class="token comment">//    amount: '123.45,</span>
    <span class="token comment">//    recipient: 'Fred Smith',</span>
    <span class="token comment">//    accountNumber: '123456789012',</span>
    <span class="token comment">// }</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="gettxid"><a href="#gettxid" class="header-anchor">#</a> getTxId</h2> <ul><li><p><strong>Returns:</strong></p> <ul><li>{String} The transactionID for the current step.</li></ul></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transactionID <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getTxId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// tx-49f4a7c5f2cf72581922de30ac69c60aa3ea2d3f</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="progressreport"><a href="#progressreport" class="header-anchor">#</a> progressReport</h2> <ul><li><p><code>{Object|String} report</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li>{Promise} No return value</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Call this function when you are about to put a step to sleep using 'retryLater()'
and the value you provide will be returned in status requests from the client.</p> <p>This allows a client application to get information about how a transaction is
progressing.</p> <p>As an example, a KYC transaction can take an extended period of time, escpecially
if it contains manual steps, and the transaction may enter a waiting mode (sleeping)
several times and it proceeds through the workflow. Using the 'progressReport'
function, status requests from the API client can receive updates along the way.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">getSwitch</span><span class="token punctuation">(</span><span class="token string">'processing-finished'</span><span class="token punctuation">)</span>
    <span class="token comment">// false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      instance<span class="token punctuation">.</span><span class="token function">progressReport</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'Waiting for backend processing to complete'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">retryLater</span><span class="token punctuation">(</span><span class="token string">'processing-finished'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    <span class="token comment">// Back end processing is finished - e.g. a webhook route set the switch</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="retrylater"><a href="#retrylater" class="header-anchor">#</a> retryLater</h2> <ul><li><p><code>{String} Name of switch (Optional)</code></p></li> <li><p><code>{Number} Sleep time in seconds (Optional)</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li>{Promise} No return value</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Calling this function will put the current step and pipline to sleep until either
the named switch changes value, of the specified duration passes. At that time, the
current step will start again.</p> <p>A value metadata.sleepCounter can be used to determine how many times the step
has been run.</p> <p>It is important to remember that the step may be called many times, so make sure you
do not perform any operations where duplicates are not acceptable in the code above
where you check whether you want to retry.</p> <blockquote><p>Note: it is essential that you <code>return await instance.retryLater(...)</code> so
the function has a chance to complete, and you return without further processing.</p></blockquote></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Call the backend to see if it has finished doing something.</span>
    <span class="token keyword">const</span> reply <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reply<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'complete'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      instance<span class="token punctuation">.</span><span class="token function">progressReport</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'Waiting for backend processing to complete'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">retryLater</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment">// wait a minute and check again</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
    <span class="token comment">// Back end processing is finished - e.g. a webhook route set the switch</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="succeeded"><a href="#succeeded" class="header-anchor">#</a> succeeded</h2> <ul><li><p><code>{Object} note</code></p></li> <li><p><code>{Object|String} output</code></p></li> <li><p><strong>Returns:</strong></p> <ul><li>{Promise} No return value</li></ul></li> <li><p><strong>Usage:</strong></p> <p>Call this function when your invoke function completes sucessfully. The pipeline
will proceed
on to the next step or, if this was the final step in the pipeline, the pipline
will complete with it's own success status.</p> <p>If <code>data</code> is null the input of the step will be used as it's output.</p> <blockquote><p>Note: it is essential that you <code>return await instance.succeeded(...)</code> so
the function has a chance to complete, and so you return without further processing.</p></blockquote></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getDataAsObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    data<span class="token punctuation">.</span>foo <span class="token operator">=</span> bar
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> instance<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'Successful completion'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="trace"><a href="#trace" class="header-anchor">#</a> trace</h2> <ul><li><p><strong>Arguments:</strong></p> <ul><li><code>{String, String, ...} message</code></li> <li><code>{String} source (Optional)</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Write a trace-level log message to the log of the current step.
This function takes an arbitrary number of arguments.</p> <p>The 'source' argument is not normally provided and defaults to
Transaction.LOG_SOURCE_INVOKE or Transaction.LOG_SOURCE_ROLLBACK depending upon
whether the pipeline is currently progressing forward or rolling back.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">'value='</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul> <h2 id="warning"><a href="#warning" class="header-anchor">#</a> warning</h2> <ul><li><p><strong>Arguments:</strong></p> <ul><li><code>{String, String, ...} message</code></li> <li><code>{String} source (Optional)</code></li></ul></li> <li><p><strong>Usage:</strong></p> <p>Write a warning-level log message to the log of the current step.
This function takes an arbitrary number of arguments.</p> <p>The 'source' argument is not normally provided and defaults to
Transaction.LOG_SOURCE_INVOKE or Transaction.LOG_SOURCE_ROLLBACK depending upon
whether the pipeline is currently progressing forward or rolling back.</p></li> <li><p><strong>Example:</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">async</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    instance<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">'value='</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>See also:</strong> <a href="/guide/step-basics.html">Components</a></li></ul></div> <footer class="page-edit" data-v-656dfe6a><div class="container" data-v-656dfe6a><p data-v-656dfe6a>
      Deployed on
      <a href="https://pages.github.com/" data-v-656dfe6a>Github Pages</a>.
       <br data-v-656dfe6a> <span class="prefix" data-v-656dfe6a>Last updated:</span> <span class="time" data-v-656dfe6a>2022-07-13, 05:12:23 UTC</span></p></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/DZDDATP.html" class="prev">DATP package</a></span> <span class="next"><a href="/api/DZDstep.html">class Step</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.96c8d89b.js" defer></script><script src="/assets/js/11.9794c269.js" defer></script><script src="/assets/js/57.34e4061f.js" defer></script><script src="/assets/js/28.ec4f1cef.js" defer></script>
  </body>
</html>
