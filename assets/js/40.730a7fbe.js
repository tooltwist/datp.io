(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{465:function(e,t,n){e.exports=n.p+"assets/img/mondat-queues.64e450b3.png"},466:function(e,t,n){e.exports=n.p+"assets/img/mondat-queues-1.42380b78.png"},604:function(e,t,n){"use strict";n.r(t);var s=n(60),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"queues"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#queues"}},[e._v("#")]),e._v(" Queues")]),e._v(" "),s("p",[e._v("This is the main page for performance monitoring. In production, or while load testing, you cannot\nwatch the number of transactions both in the queues, or currently being processed.\nThis page displays information in real time, with an update interval shown in the top right.")]),e._v(" "),s("p",[e._v("See "),s("a",{attrs:{href:"http://localhost:8080/guide/ZQueues.html#event-queues-2",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),s("OutboundLink")],1),e._v(" for an explanation of queues and workers.")]),e._v(" "),s("p",[s("img",{attrs:{src:n(465),alt:"DATP Node"}})]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Each node writes it's status to REDIS, and this page reads from REDIS\nat the specified poll interval. For performance reasons however, the nodes\nreport their status only periodically (configurable, but typically 15 seconds),\nso the polling may take a short period to reflect the latest information.")])]),e._v(" "),s("h2",{attrs:{id:"queues-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#queues-2"}},[e._v("#")]),e._v(" Queues")]),e._v(" "),s("p",[e._v("Of particular interest are the queue sizes and the numbers of workers currently in use.\nIn a smooth flowing system the workers will keep up with the rate at which jobs are being\nadded to the queue, and the queueing will only be used to buffer surges in workload.")]),e._v(" "),s("p",[e._v("The throughput numbers show the number of transactions/steps being started each second,\nand the number of transactions/steps being completed each second.\nThese numbers are typically balanced, although may mismatch when you have a burst of\nlong running transactions come in. In that case, workers will take a while to completed\nthe jobs, and then then will show up in the completed figure.")]),e._v(" "),s("p",[e._v("If queue lengths are getting long, it indicates that the work is coming in faster\nthan the node is processing. Keep a watch for inexplicably increasing queue lengths.")]),e._v(" "),s("h2",{attrs:{id:"workers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#workers"}},[e._v("#")]),e._v(" Workers")]),e._v(" "),s("p",[e._v("The queues page shows three numbers for the worker threads:")]),e._v(" "),s("ol",[s("li",[e._v("The number of threads currently processing.")]),e._v(" "),s("li",[e._v("The maximum number of threads we will use for processing.")]),e._v(" "),s("li",[e._v("The total number of threads we have running.")])]),e._v(" "),s("blockquote",[s("p",[e._v("Worker threads use insignificant resources, so we don't shut them down if you don't want to use them.\nHence item (3) shows the maximum number of workers you have had running.")])]),e._v(" "),s("p",[e._v("The number of workers to be used can be adjusted using the "),s("code",[e._v("configure")]),e._v(" button. The specified\nnumber of workers will be applied to all nodes in the node group. Changes can take up to a\ncouple of minutes to propagate to the nodes and be reflected back in MONDAT.")]),e._v(" "),s("p",[s("img",{attrs:{src:n(466),alt:"DATP Node"}})]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Not having enough workers is\nlikely to reduce throughput, because queue processing becomes [almost] single threaded.\nPlease note however that increasing the number of workers does not necessarity\nequate to an increase in throughput. All thread runs are running in the same process\nand sharing the same CPU and process resources.")]),e._v(" "),s("p",[e._v("This tuning is totally\napplication dependant, and is aff4ected by factors such as whether pipelines are CPU intensive,\nor spend much of their time waiting for database resources or external systems.")]),e._v(" "),s("p",[s("em",[s("strong",[e._v("Please do thorough load testing")])]),e._v(" -\nDATP is highly tuneable, but unfortunately cannot magically tune itself\nto your specific application design.")])]),e._v(" "),s("p",[e._v("If necessary the number of workers can be decreased to reduce workload on downstream systems.\nIt can also be reduced down to zero to completely stop the processing of transactions by the node group.\nInstead, jobs will just wait in the queue until you start the workers again.")]),e._v(" "),s("p",[e._v("This may be useful to prevent continually attempting to contact a backend system you\nknow is not available. Just make sure you have the system configured sufficiently to\nnot overflow the REDIS caching. The caches page may be useful to monitor.")]),e._v(" "),s("h2",{attrs:{id:"orphan-nodes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orphan-nodes"}},[e._v("#")]),e._v(" Orphan nodes")]),e._v(" "),s("p",[e._v("If a node dies it may leave behind a queue of events that need to be processed.\nIn this case the orphan node will be displayed in red above all the other nodes in the group.")]),e._v(" "),s("p",[e._v("If you click on this orphan node you will be given a dialog box and the option to migrate\nthe events from the orphan queue into the queue for the node group. They will then be\nprocessed by the first available node in the group.")])])}),[],!1,null,null,null);t.default=o.exports}}]);