<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | DATP</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600|Open+Sans:400,600;display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="icon" href="/datp-images/TooltwistLogo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/apple-icon-152x152.png">
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script src="https://extend.vimeocdn.com/ga/72160148.js" defer="defer"></script>
    <meta name="description" content="DATP - Distributed Aynchronous Transaction Pipelines">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.1e0e1b88.css" as="style"><link rel="preload" href="/assets/js/app.96c8d89b.js" as="script"><link rel="preload" href="/assets/js/11.9794c269.js" as="script"><link rel="preload" href="/assets/js/126.1356508c.js" as="script"><link rel="preload" href="/assets/js/30.d8319f9e.js" as="script"><link rel="preload" href="/assets/js/28.ec4f1cef.js" as="script"><link rel="prefetch" href="/assets/js/1.7e95004f.js"><link rel="prefetch" href="/assets/js/100.7b5f279a.js"><link rel="prefetch" href="/assets/js/101.8088a01a.js"><link rel="prefetch" href="/assets/js/102.a2707c46.js"><link rel="prefetch" href="/assets/js/103.610d48ba.js"><link rel="prefetch" href="/assets/js/104.ecbd1190.js"><link rel="prefetch" href="/assets/js/105.900611b7.js"><link rel="prefetch" href="/assets/js/106.5793ab06.js"><link rel="prefetch" href="/assets/js/107.a7fe6820.js"><link rel="prefetch" href="/assets/js/108.a04b80ab.js"><link rel="prefetch" href="/assets/js/109.70f2d20c.js"><link rel="prefetch" href="/assets/js/110.d27acda2.js"><link rel="prefetch" href="/assets/js/111.a718f44b.js"><link rel="prefetch" href="/assets/js/112.4b701799.js"><link rel="prefetch" href="/assets/js/113.a3c2eaab.js"><link rel="prefetch" href="/assets/js/114.560b46bb.js"><link rel="prefetch" href="/assets/js/115.65468bf5.js"><link rel="prefetch" href="/assets/js/116.74778fac.js"><link rel="prefetch" href="/assets/js/117.06524759.js"><link rel="prefetch" href="/assets/js/118.ab6ab93f.js"><link rel="prefetch" href="/assets/js/119.d940e4ad.js"><link rel="prefetch" href="/assets/js/12.181e45a3.js"><link rel="prefetch" href="/assets/js/120.3978c798.js"><link rel="prefetch" href="/assets/js/121.e5dde80c.js"><link rel="prefetch" href="/assets/js/122.f37a9796.js"><link rel="prefetch" href="/assets/js/123.a11365e9.js"><link rel="prefetch" href="/assets/js/124.61342c7f.js"><link rel="prefetch" href="/assets/js/125.f0f1967c.js"><link rel="prefetch" href="/assets/js/127.f16f1b45.js"><link rel="prefetch" href="/assets/js/128.5c2e47ab.js"><link rel="prefetch" href="/assets/js/129.91775d24.js"><link rel="prefetch" href="/assets/js/13.98c968c4.js"><link rel="prefetch" href="/assets/js/130.e45b0936.js"><link rel="prefetch" href="/assets/js/131.c5c07aed.js"><link rel="prefetch" href="/assets/js/132.2ce4c3e9.js"><link rel="prefetch" href="/assets/js/133.7c57901a.js"><link rel="prefetch" href="/assets/js/134.f49b7224.js"><link rel="prefetch" href="/assets/js/135.d5616ac6.js"><link rel="prefetch" href="/assets/js/136.d849ffd6.js"><link rel="prefetch" href="/assets/js/137.b573a6ad.js"><link rel="prefetch" href="/assets/js/138.56258355.js"><link rel="prefetch" href="/assets/js/139.aad4bbf6.js"><link rel="prefetch" href="/assets/js/14.987a7b0c.js"><link rel="prefetch" href="/assets/js/140.189371a6.js"><link rel="prefetch" href="/assets/js/141.495e42d2.js"><link rel="prefetch" href="/assets/js/142.23461167.js"><link rel="prefetch" href="/assets/js/143.121d7dc0.js"><link rel="prefetch" href="/assets/js/144.616bad1a.js"><link rel="prefetch" href="/assets/js/145.a183053d.js"><link rel="prefetch" href="/assets/js/146.81ae4123.js"><link rel="prefetch" href="/assets/js/147.18a05b4c.js"><link rel="prefetch" href="/assets/js/148.1e2e1642.js"><link rel="prefetch" href="/assets/js/149.23793018.js"><link rel="prefetch" href="/assets/js/15.88fd3a8b.js"><link rel="prefetch" href="/assets/js/150.e5ab05fa.js"><link rel="prefetch" href="/assets/js/151.2fde1428.js"><link rel="prefetch" href="/assets/js/152.0d9cd120.js"><link rel="prefetch" href="/assets/js/153.491e5c0e.js"><link rel="prefetch" href="/assets/js/154.8ee1dab7.js"><link rel="prefetch" href="/assets/js/155.102f5e8b.js"><link rel="prefetch" href="/assets/js/156.452ef410.js"><link rel="prefetch" href="/assets/js/157.76bdd568.js"><link rel="prefetch" href="/assets/js/158.7f0db036.js"><link rel="prefetch" href="/assets/js/159.a4a4cf1b.js"><link rel="prefetch" href="/assets/js/16.6090ffcb.js"><link rel="prefetch" href="/assets/js/160.21b43598.js"><link rel="prefetch" href="/assets/js/161.3afc4bd2.js"><link rel="prefetch" href="/assets/js/162.75b81d23.js"><link rel="prefetch" href="/assets/js/163.78d3058f.js"><link rel="prefetch" href="/assets/js/164.6f18bd35.js"><link rel="prefetch" href="/assets/js/165.c58c7885.js"><link rel="prefetch" href="/assets/js/166.9719b94b.js"><link rel="prefetch" href="/assets/js/167.c35776e2.js"><link rel="prefetch" href="/assets/js/168.ff44094f.js"><link rel="prefetch" href="/assets/js/169.97199c11.js"><link rel="prefetch" href="/assets/js/17.16eb2f90.js"><link rel="prefetch" href="/assets/js/170.722e84c7.js"><link rel="prefetch" href="/assets/js/171.50470ebd.js"><link rel="prefetch" href="/assets/js/172.73a0ea3b.js"><link rel="prefetch" href="/assets/js/173.1eda63fb.js"><link rel="prefetch" href="/assets/js/174.83917e43.js"><link rel="prefetch" href="/assets/js/175.e11d5e48.js"><link rel="prefetch" href="/assets/js/176.71d5cc56.js"><link rel="prefetch" href="/assets/js/177.db126c96.js"><link rel="prefetch" href="/assets/js/178.2e5200f4.js"><link rel="prefetch" href="/assets/js/179.2dcffe3c.js"><link rel="prefetch" href="/assets/js/18.5e443404.js"><link rel="prefetch" href="/assets/js/180.3098b79e.js"><link rel="prefetch" href="/assets/js/181.9f4c19e3.js"><link rel="prefetch" href="/assets/js/182.2c581d5e.js"><link rel="prefetch" href="/assets/js/183.19cb9b29.js"><link rel="prefetch" href="/assets/js/184.fc121b8a.js"><link rel="prefetch" href="/assets/js/185.21d5df6a.js"><link rel="prefetch" href="/assets/js/186.02735562.js"><link rel="prefetch" href="/assets/js/187.13b23f74.js"><link rel="prefetch" href="/assets/js/188.871b0a7f.js"><link rel="prefetch" href="/assets/js/189.ad2dbbc4.js"><link rel="prefetch" href="/assets/js/19.3d3fce5f.js"><link rel="prefetch" href="/assets/js/190.8bd38138.js"><link rel="prefetch" href="/assets/js/191.198d8197.js"><link rel="prefetch" href="/assets/js/192.1c597c6a.js"><link rel="prefetch" href="/assets/js/193.63daa1aa.js"><link rel="prefetch" href="/assets/js/194.74ed235d.js"><link rel="prefetch" href="/assets/js/195.c31370fc.js"><link rel="prefetch" href="/assets/js/196.ef493613.js"><link rel="prefetch" href="/assets/js/197.a6842606.js"><link rel="prefetch" href="/assets/js/198.adb638c1.js"><link rel="prefetch" href="/assets/js/199.5774476c.js"><link rel="prefetch" href="/assets/js/2.4c9cebbf.js"><link rel="prefetch" href="/assets/js/20.0e657b3d.js"><link rel="prefetch" href="/assets/js/200.66f0b965.js"><link rel="prefetch" href="/assets/js/201.abf14b35.js"><link rel="prefetch" href="/assets/js/202.468228bd.js"><link rel="prefetch" href="/assets/js/203.63f8186f.js"><link rel="prefetch" href="/assets/js/204.30eff7de.js"><link rel="prefetch" href="/assets/js/205.4035af12.js"><link rel="prefetch" href="/assets/js/206.d03cb4a3.js"><link rel="prefetch" href="/assets/js/207.c8237a70.js"><link rel="prefetch" href="/assets/js/208.ad1fd574.js"><link rel="prefetch" href="/assets/js/209.79847458.js"><link rel="prefetch" href="/assets/js/21.683f305f.js"><link rel="prefetch" href="/assets/js/210.6bff4a9e.js"><link rel="prefetch" href="/assets/js/211.5692485a.js"><link rel="prefetch" href="/assets/js/212.c739d8d9.js"><link rel="prefetch" href="/assets/js/213.9075c716.js"><link rel="prefetch" href="/assets/js/214.9d0406c0.js"><link rel="prefetch" href="/assets/js/215.2d39fe30.js"><link rel="prefetch" href="/assets/js/216.ed9b04a7.js"><link rel="prefetch" href="/assets/js/217.7989eb53.js"><link rel="prefetch" href="/assets/js/218.4459a77c.js"><link rel="prefetch" href="/assets/js/219.66e86f48.js"><link rel="prefetch" href="/assets/js/22.37991c24.js"><link rel="prefetch" href="/assets/js/220.5155a8a3.js"><link rel="prefetch" href="/assets/js/221.21b780fc.js"><link rel="prefetch" href="/assets/js/222.5231eaba.js"><link rel="prefetch" href="/assets/js/223.2bbfe1a6.js"><link rel="prefetch" href="/assets/js/224.902bc25f.js"><link rel="prefetch" href="/assets/js/225.5da79aac.js"><link rel="prefetch" href="/assets/js/226.f0b21230.js"><link rel="prefetch" href="/assets/js/227.63a23441.js"><link rel="prefetch" href="/assets/js/228.18a6770e.js"><link rel="prefetch" href="/assets/js/229.370c71fe.js"><link rel="prefetch" href="/assets/js/23.9601d1cd.js"><link rel="prefetch" href="/assets/js/230.1d37a624.js"><link rel="prefetch" href="/assets/js/231.b0427468.js"><link rel="prefetch" href="/assets/js/232.ddaef15c.js"><link rel="prefetch" href="/assets/js/233.bba6caea.js"><link rel="prefetch" href="/assets/js/234.a944a95a.js"><link rel="prefetch" href="/assets/js/235.ae50fa96.js"><link rel="prefetch" href="/assets/js/236.cfb49c59.js"><link rel="prefetch" href="/assets/js/237.753a9415.js"><link rel="prefetch" href="/assets/js/238.584ff1a5.js"><link rel="prefetch" href="/assets/js/239.a29fadef.js"><link rel="prefetch" href="/assets/js/24.b211565b.js"><link rel="prefetch" href="/assets/js/240.550611c4.js"><link rel="prefetch" href="/assets/js/241.7e23a954.js"><link rel="prefetch" href="/assets/js/242.62b5cfe4.js"><link rel="prefetch" href="/assets/js/243.30d18943.js"><link rel="prefetch" href="/assets/js/244.39cdb125.js"><link rel="prefetch" href="/assets/js/245.f3df432b.js"><link rel="prefetch" href="/assets/js/246.91c235ed.js"><link rel="prefetch" href="/assets/js/247.4058f8b3.js"><link rel="prefetch" href="/assets/js/248.f4c3adf5.js"><link rel="prefetch" href="/assets/js/249.c6dd8c68.js"><link rel="prefetch" href="/assets/js/25.658b9941.js"><link rel="prefetch" href="/assets/js/250.d6d1171c.js"><link rel="prefetch" href="/assets/js/251.925b968f.js"><link rel="prefetch" href="/assets/js/252.55fb900c.js"><link rel="prefetch" href="/assets/js/253.f49fbc2e.js"><link rel="prefetch" href="/assets/js/254.f939f80b.js"><link rel="prefetch" href="/assets/js/255.5f995844.js"><link rel="prefetch" href="/assets/js/256.d80d555c.js"><link rel="prefetch" href="/assets/js/26.a419c574.js"><link rel="prefetch" href="/assets/js/27.ff552d78.js"><link rel="prefetch" href="/assets/js/29.79139b27.js"><link rel="prefetch" href="/assets/js/3.f37bedd0.js"><link rel="prefetch" href="/assets/js/31.9a3927f4.js"><link rel="prefetch" href="/assets/js/32.9ea5e497.js"><link rel="prefetch" href="/assets/js/33.a4b51f80.js"><link rel="prefetch" href="/assets/js/34.0744883c.js"><link rel="prefetch" href="/assets/js/35.348d8e95.js"><link rel="prefetch" href="/assets/js/36.ade36d9b.js"><link rel="prefetch" href="/assets/js/37.0bebc7d4.js"><link rel="prefetch" href="/assets/js/38.0a34703a.js"><link rel="prefetch" href="/assets/js/39.67f337d9.js"><link rel="prefetch" href="/assets/js/4.6ac22d55.js"><link rel="prefetch" href="/assets/js/40.d5ff806a.js"><link rel="prefetch" href="/assets/js/41.b1014477.js"><link rel="prefetch" href="/assets/js/42.cb4ff247.js"><link rel="prefetch" href="/assets/js/43.138507eb.js"><link rel="prefetch" href="/assets/js/44.091726f6.js"><link rel="prefetch" href="/assets/js/45.256f0ba1.js"><link rel="prefetch" href="/assets/js/46.57b3a359.js"><link rel="prefetch" href="/assets/js/47.3b6ae717.js"><link rel="prefetch" href="/assets/js/48.15616e68.js"><link rel="prefetch" href="/assets/js/49.db11eeee.js"><link rel="prefetch" href="/assets/js/5.c6098f04.js"><link rel="prefetch" href="/assets/js/50.9527ffd1.js"><link rel="prefetch" href="/assets/js/51.86e32a01.js"><link rel="prefetch" href="/assets/js/52.a708a377.js"><link rel="prefetch" href="/assets/js/53.f79d7c20.js"><link rel="prefetch" href="/assets/js/54.225d4e6f.js"><link rel="prefetch" href="/assets/js/55.695da4fe.js"><link rel="prefetch" href="/assets/js/56.c18e995d.js"><link rel="prefetch" href="/assets/js/57.34e4061f.js"><link rel="prefetch" href="/assets/js/58.6106d582.js"><link rel="prefetch" href="/assets/js/59.9be34dec.js"><link rel="prefetch" href="/assets/js/6.e3a4b8a2.js"><link rel="prefetch" href="/assets/js/60.ee5d5845.js"><link rel="prefetch" href="/assets/js/61.b2ceb24d.js"><link rel="prefetch" href="/assets/js/62.d508c4f9.js"><link rel="prefetch" href="/assets/js/63.e8c67fb5.js"><link rel="prefetch" href="/assets/js/64.b70c27cc.js"><link rel="prefetch" href="/assets/js/65.4c14aa77.js"><link rel="prefetch" href="/assets/js/66.b005fe31.js"><link rel="prefetch" href="/assets/js/67.867f4452.js"><link rel="prefetch" href="/assets/js/68.d180e3b3.js"><link rel="prefetch" href="/assets/js/69.bb7b116b.js"><link rel="prefetch" href="/assets/js/7.c23d6fb5.js"><link rel="prefetch" href="/assets/js/70.f3074e15.js"><link rel="prefetch" href="/assets/js/71.3c493b84.js"><link rel="prefetch" href="/assets/js/72.feac74fd.js"><link rel="prefetch" href="/assets/js/73.9841c07f.js"><link rel="prefetch" href="/assets/js/74.f94b00de.js"><link rel="prefetch" href="/assets/js/75.f4af4ea4.js"><link rel="prefetch" href="/assets/js/76.800063f2.js"><link rel="prefetch" href="/assets/js/77.a8b33c60.js"><link rel="prefetch" href="/assets/js/78.6e9bc75f.js"><link rel="prefetch" href="/assets/js/79.fb661730.js"><link rel="prefetch" href="/assets/js/80.3e8e696b.js"><link rel="prefetch" href="/assets/js/81.e08e2da4.js"><link rel="prefetch" href="/assets/js/82.34d94184.js"><link rel="prefetch" href="/assets/js/83.d13a917a.js"><link rel="prefetch" href="/assets/js/84.09cfc0d9.js"><link rel="prefetch" href="/assets/js/85.3ee046ee.js"><link rel="prefetch" href="/assets/js/86.48834b04.js"><link rel="prefetch" href="/assets/js/87.51e661d8.js"><link rel="prefetch" href="/assets/js/88.c6bd90f6.js"><link rel="prefetch" href="/assets/js/89.26d6bec6.js"><link rel="prefetch" href="/assets/js/90.253cb7be.js"><link rel="prefetch" href="/assets/js/91.87124049.js"><link rel="prefetch" href="/assets/js/92.85c5685a.js"><link rel="prefetch" href="/assets/js/93.8de279b6.js"><link rel="prefetch" href="/assets/js/94.afd973c9.js"><link rel="prefetch" href="/assets/js/95.00e04899.js"><link rel="prefetch" href="/assets/js/96.eabafd72.js"><link rel="prefetch" href="/assets/js/97.680a8fc8.js"><link rel="prefetch" href="/assets/js/98.ee5a8394.js"><link rel="prefetch" href="/assets/js/99.247a52b0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.30eb34f0.js"><link rel="prefetch" href="/assets/js/vendors~search-page.b6860559.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e0e1b88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/datp-images/TooltwistLogo.png" alt="DATP" class="logo"> <span class="site-name can-hide">DATP</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/tutorial/introduction.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav> <div id="docsearch"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/DZDintroduction.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/api/DZDDATP.html" class="nav-link">
  API Reference
</a></div><div class="nav-item"><a href="/tutorial/introduction.html" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/deployment/DZDconfiguration.html" class="nav-link">
  Deployment
</a></div></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/DZDintroduction.html" class="sidebar-link">DATP + RESTful APIs</a></li><li><a href="/guide/ZUsecases.html" class="sidebar-link">Use Cases</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Architecture</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/ZArchitecture.html" class="sidebar-link">Concepts</a></li><li><a href="/guide/ZQueues.html" class="sidebar-link">Event Queues</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mondat</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/DZDmondat.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/DZDmondat-caches.html" class="sidebar-link">Caches</a></li><li><a href="/guide/DZDmondat-queues.html" class="sidebar-link">Queues</a></li><li><a href="/guide/DZDmondat-nodes.html" class="sidebar-link">Nodes</a></li><li><a href="/guide/DZDmondat-transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/guide/DZDmondat-pipelines.html" class="sidebar-link">Pipelines</a></li><li><a href="/guide/DZDmondat-testing.html" class="sidebar-link">Testing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/DZDinstallation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/DZDdeveloper-guide.html" class="sidebar-link">Quick Start</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Transaction Updates</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/DZDpolling.html" class="sidebar-link">Polling</a></li><li><a href="/guide/DZDwebhooks.html" class="sidebar-link">Web hooks</a></li><li><a href="/guide/DZDprogress-reports.html" class="sidebar-link">Progress Reports</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/DZDsleeping.html" class="sidebar-link">Sleeping</a></li><li><a href="/guide/DZDreply-converters.html" class="sidebar-link">Reply converters</a></li><li><a href="/guide/DZDthrottling.html" class="sidebar-link">Throttling</a></li><li><a href="/guide/DZDerror-messages.html" class="sidebar-link">Error messages</a></li><li><a href="/guide/DZDstep-definitions.html" class="sidebar-link">Step definitions</a></li><li><a href="/guide/DZDresponse-classification.html" class="sidebar-link">Response Classifications</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h1> <h2 id="why-composition-api"><a href="#why-composition-api" class="header-anchor">#</a> Why Composition API?</h2> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Reaching this far in the documentation, you should already be familiar with both <a href="/guide/junkyard/introduction.html">the basics of Vue</a> and <a href="/guide/junkyard/component-basics.html">creating components</a>.</p></div> <section class="video-lesson"><a href="https://www.vuemastery.com/courses/vue-3-essentials/why-the-composition-api" target="_blank" rel="sponsored noopener" title="Learn how Composition API works in depth with Vue Mastery">Watch a free video about the Composition API on Vue Mastery</a></section> <p>Creating Vue components allows us to extract repeatable parts of the interface coupled with its functionality into reusable pieces of code. This alone can get our application pretty far in terms of maintainability and flexibility. However, our collective experience has proved that this alone might not be enough, especially when your application is getting really big – think several hundred components. When dealing with such large applications, sharing and reusing code becomes especially important.</p> <p>Let’s imagine that in our app, we have a view to show a list of repositories of a certain user. On top of that, we want to apply search and filter capabilities. Our component handling this view could look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">repositories</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 1</span>
      <span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
      <span class="token literal-property property">searchQuery</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">filteredRepositories</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
    <span class="token function">repositoriesMatchingSearchQuery</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'getUserRepositories'</span> <span class="token comment">// 1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getUserRepositories</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// using `this.user` to fetch user repositories</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 1</span>
    <span class="token function">updateFilters</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserRepositories</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>This component has several responsibilities:</p> <ol><li>Getting repositories from a presumedly external API for that user name and refreshing it whenever the user changes</li> <li>Searching for repositories using a <code>searchQuery</code> string</li> <li>Filtering repositories using a <code>filters</code> object</li></ol> <p>Organizing logics with component's options (<code>data</code>, <code>computed</code>, <code>methods</code>, <code>watch</code>) works in most cases. However, when our components get bigger, the list of <strong>logical concerns</strong> also grows. This can lead to components that are hard to read and understand, especially for people who didn't write them in the first place.</p> <p><img src="/images/options-api.png" alt="Vue Options API: Code grouped by option type"></p> <p>Example presenting a large component where its <strong>logical concerns</strong> are grouped by colors.</p> <p>Such fragmentation is what makes it difficult to understand and maintain a complex component. The separation of options obscures the underlying logical concerns. In addition, when working on a single logical concern, we have to constantly &quot;jump&quot; around option blocks for the relevant code.</p> <p>It would be much nicer if we could collocate code related to the same logical concern. And this is exactly what the Composition API enables us to do.</p> <h2 id="basics-of-composition-api"><a href="#basics-of-composition-api" class="header-anchor">#</a> Basics of Composition API</h2> <p>Now that we know the <strong>why</strong> we can get to the <strong>how</strong>. To start working with the Composition API we first need a place where we can actually use it. In a Vue component, we call this place the <code>setup</code>.</p> <h3 id="setup-component-option"><a href="#setup-component-option" class="header-anchor">#</a> <code>setup</code> Component Option</h3> <section class="video-lesson"><a href="https://www.vuemastery.com/courses/vue-3-essentials/setup-and-reactive-references" target="_blank" rel="sponsored noopener" title="Learn how setup works with Vue Mastery">Watch a free video on setup on Vue Mastery</a></section> <p>The new <code>setup</code> component option is executed <strong>before</strong> the component is created, once the <code>props</code> are resolved, and serves as the entry point for composition APIs.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You should avoid using <code>this</code> inside <code>setup</code> as it won't refer to the component instance. <code>setup</code> is called before <code>data</code> properties, <code>computed</code> properties or <code>methods</code> are resolved, so they won't be available within <code>setup</code>.</p></div> <p>The <code>setup</code> option should be a function that accepts <code>props</code> and <code>context</code> which we will talk about <a href="/guide/junkyard/composition-api-setup.html#arguments">later</a>. Additionally, everything that we return from <code>setup</code> will be exposed to the rest of our component (computed properties, methods, lifecycle hooks and so on) as well as to the component's template.</p> <p>Let’s add <code>setup</code> to our component:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token comment">// { user: '' }</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// anything returned here will be available for the rest of the component</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// the &quot;rest&quot; of the component</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Now let’s start with extracting the first logical concern (marked as &quot;1&quot; in the original snippet).</p> <blockquote><ol><li>Getting repositories from a presumedly external API for that user name and refreshing it whenever the user changes</li></ol></blockquote> <p>We will start with the most obvious parts:</p> <ul><li>The list of repositories</li> <li>The function to update the list of repositories</li> <li>Returning both the list and the function so they are accessible by other component options</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue `setup` function</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>

<span class="token comment">// inside our component</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> repositories <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    repositories <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories <span class="token comment">// functions returned behave the same as methods</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>This is our starting point, except it's not working yet because our <code>repositories</code> variable is not reactive. This means from a user's perspective, the repository list would remain empty. Let's fix that!</p> <h3 id="reactive-variables-with-ref"><a href="#reactive-variables-with-ref" class="header-anchor">#</a> Reactive Variables with <code>ref</code></h3> <p>In Vue 3.0 we can make any variable reactive anywhere with a new <code>ref</code> function, like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>ref</code> takes the argument and returns it wrapped within an object with a <code>value</code> property, which can then be used to access or mutate the value of the reactive variable:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token comment">// { value: 0 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 0</span>

counter<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Wrapping values inside an object might seem unnecessary but is required to keep the behavior unified across different data types in JavaScript. That’s because in JavaScript, primitive types like <code>Number</code> or <code>String</code> are passed by value, not by reference:</p> <p><img src="https://blog.penjee.com/wp-content/uploads/2015/02/pass-by-reference-vs-pass-by-value-animation.gif" alt="Pass by reference vs pass by value"></p> <p>Having a wrapper object around any value allows us to safely pass it across our whole app without worrying about losing its reactivity somewhere along the way.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>In other words, <code>ref</code> creates a <strong>Reactive Reference</strong> to our value. The concept of working with <strong>References</strong> will be used often throughout the Composition API.</p></div> <p>Back to our example, let's create a reactive <code>repositories</code> variable:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue `setup` function</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// in our component</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Done! Now whenever we call <code>getUserRepositories</code>, <code>repositories</code> will be mutated and the view will be updated to reflect the change. Our component should now look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      repositories<span class="token punctuation">,</span>
      getUserRepositories
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
      <span class="token literal-property property">searchQuery</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">filteredRepositories</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
    <span class="token function">repositoriesMatchingSearchQuery</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'getUserRepositories'</span> <span class="token comment">// 1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">updateFilters</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserRepositories</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>We have moved several pieces of our first logical concern into the <code>setup</code> method, nicely put close to each other. What’s left is calling <code>getUserRepositories</code> in the <code>mounted</code> hook and setting up a watcher to do that whenever the <code>user</code> prop changes.</p> <p>We will start with the lifecycle hook.</p> <h3 id="lifecycle-hook-registration-inside-setup"><a href="#lifecycle-hook-registration-inside-setup" class="header-anchor">#</a> Lifecycle Hook Registration Inside <code>setup</code></h3> <p>To make Composition API feature-complete compared to Options API, we also need a way to register lifecycle hooks inside <code>setup</code>. This is possible thanks to several new functions exported from Vue. Lifecycle hooks on composition API have the same name as for Options API but are prefixed with <code>on</code>: i.e. <code>mounted</code> would look like <code>onMounted</code>.</p> <p>These functions accept a callback that will be executed when the hook is called by the component.</p> <p>Let’s add it to our <code>setup</code> function:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue `setup` function</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// in our component</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>getUserRepositories<span class="token punctuation">)</span> <span class="token comment">// on `mounted` call `getUserRepositories`</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Now we need to react to the changes made to the <code>user</code> prop. For that we will use the standalone <code>watch</code> function.</p> <h3 id="reacting-to-changes-with-watch"><a href="#reacting-to-changes-with-watch" class="header-anchor">#</a> Reacting to Changes with <code>watch</code></h3> <p>Just like how we set up a watcher on the <code>user</code> property inside our component using the <code>watch</code> option, we can do the same using the <code>watch</code> function imported from Vue. It accepts 3 arguments:</p> <ul><li>A <strong>Reactive Reference</strong> or getter function that we want to watch</li> <li>A callback</li> <li>Optional configuration options</li></ul> <p><strong>Here’s a quick look at how it works.</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>counter<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new counter value is: '</span> <span class="token operator">+</span> counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Whenever <code>counter</code> is modified, for example <code>counter.value = 5</code>, the watch will trigger and execute the callback (second argument) which in this case will log <code>'The new counter value is: 5'</code> into our console.</p> <p><strong>Below is the Options API equivalent:</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">counter</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The new counter value is: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>For more details on <code>watch</code>, refer to our <a href="/guide/junkyard/reactivity-computed-watchers.html#watch">in-depth guide</a>.</p> <p><strong>Let’s now apply it to our example:</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue `setup` function</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// in our component</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// using `toRefs` to create a Reactive Reference to the `user` property of props</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// update `props.user` to `user.value` to access the Reference value</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>getUserRepositories<span class="token punctuation">)</span>

  <span class="token comment">// set a watcher on the Reactive Reference to user prop</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> getUserRepositories<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>You probably have noticed the use of <code>toRefs</code> at the top of our <code>setup</code>. This is to ensure our watcher will react to changes made to the <code>user</code> prop.</p> <p>With those changes in place, we've just moved the whole first logical concern into a single place. We can now do the same with the second concern – filtering based on <code>searchQuery</code>, this time with a computed property.</p> <h3 id="standalone-computed-properties"><a href="#standalone-computed-properties" class="header-anchor">#</a> Standalone <code>computed</code> properties</h3> <p>Similar to <code>ref</code> and <code>watch</code>, computed properties can also be created outside of a Vue component with the <code>computed</code> function imported from Vue. Let’s get back to our counter example:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> twiceTheCounter <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

counter<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>twiceTheCounter<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Here, the <code>computed</code> function returns a <em>read-only</em> <strong>Reactive Reference</strong> to the output of the getter-like callback passed as the first argument to <code>computed</code>. In order to access the <strong>value</strong> of the newly-created computed variable, we need to use the <code>.value</code> property just like with <code>ref</code>.</p> <p>Let’s move our search functionality into <code>setup</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue `setup` function</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// in our component</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// using `toRefs` to create a Reactive Reference to the `user` property of props</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// update `props.user` to `user.value` to access the Reference value</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>getUserRepositories<span class="token punctuation">)</span>

  <span class="token comment">// set a watcher on the Reactive Reference to user prop</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> getUserRepositories<span class="token punctuation">)</span>

  <span class="token keyword">const</span> searchQuery <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> repositoriesMatchingSearchQuery <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> repositories<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
      <span class="token parameter">repository</span> <span class="token operator">=&gt;</span> repository<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories<span class="token punctuation">,</span>
    searchQuery<span class="token punctuation">,</span>
    repositoriesMatchingSearchQuery
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>We could do the same for other <strong>logical concerns</strong> but you might be already asking the question – <em>Isn’t this just moving the code to the <code>setup</code> option and making it extremely big?</em> Well, that’s true. That’s why before moving on with the other responsibilities, we will first extract the above code into a standalone <strong>composition function</strong>. Let's start with creating <code>useUserRepositories</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/composables/useUserRepositories.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useUserRepositories</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>getUserRepositories<span class="token punctuation">)</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> getUserRepositories<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>And then the searching functionality:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/composables/useRepositoryNameSearch.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useRepositoryNameSearch</span><span class="token punctuation">(</span><span class="token parameter">repositories</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> searchQuery <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> repositoriesMatchingSearchQuery <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> repositories<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">repository</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> repository<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchQuery<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    searchQuery<span class="token punctuation">,</span>
    repositoriesMatchingSearchQuery
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>Now having those two functionalities in separate files, we can start using them in our component. Here’s how this can be done:</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>
<span class="token keyword">import</span> useUserRepositories <span class="token keyword">from</span> <span class="token string">'@/composables/useUserRepositories'</span>
<span class="token keyword">import</span> useRepositoryNameSearch <span class="token keyword">from</span> <span class="token string">'@/composables/useRepositoryNameSearch'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> repositories<span class="token punctuation">,</span> getUserRepositories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      searchQuery<span class="token punctuation">,</span>
      repositoriesMatchingSearchQuery
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRepositoryNameSearch</span><span class="token punctuation">(</span>repositories<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// Since we don’t really care about the unfiltered repositories</span>
      <span class="token comment">// we can expose the filtered results under the `repositories` name</span>
      <span class="token literal-property property">repositories</span><span class="token operator">:</span> repositoriesMatchingSearchQuery<span class="token punctuation">,</span>
      getUserRepositories<span class="token punctuation">,</span>
      searchQuery<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">filteredRepositories</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">updateFilters</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>At this point you probably already know the drill, so let’s skip to the end and migrate the leftover filtering functionality. We don’t really need to get into the implementation details as it’s not the point of this guide.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> useUserRepositories <span class="token keyword">from</span> <span class="token string">'@/composables/useUserRepositories'</span>
<span class="token keyword">import</span> useRepositoryNameSearch <span class="token keyword">from</span> <span class="token string">'@/composables/useRepositoryNameSearch'</span>
<span class="token keyword">import</span> useRepositoryFilters <span class="token keyword">from</span> <span class="token string">'@/composables/useRepositoryFilters'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> repositories<span class="token punctuation">,</span> getUserRepositories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      searchQuery<span class="token punctuation">,</span>
      repositoriesMatchingSearchQuery
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRepositoryNameSearch</span><span class="token punctuation">(</span>repositories<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      filters<span class="token punctuation">,</span>
      updateFilters<span class="token punctuation">,</span>
      filteredRepositories
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRepositoryFilters</span><span class="token punctuation">(</span>repositoriesMatchingSearchQuery<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// Since we don’t really care about the unfiltered repositories</span>
      <span class="token comment">// we can expose the end results under the `repositories` name</span>
      <span class="token literal-property property">repositories</span><span class="token operator">:</span> filteredRepositories<span class="token punctuation">,</span>
      getUserRepositories<span class="token punctuation">,</span>
      searchQuery<span class="token punctuation">,</span>
      filters<span class="token punctuation">,</span>
      updateFilters
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>And we are done!</p> <p>Keep in mind that we've only scratched the surface of Composition API and what it allows us to do. To learn more about it, refer to the in-depth guide.</p></div> <footer class="page-edit" data-v-656dfe6a><div class="container" data-v-656dfe6a><p data-v-656dfe6a>
      Deployed on
      <a href="https://pages.github.com/" data-v-656dfe6a>Github Pages</a>.
       <br data-v-656dfe6a> <span class="prefix" data-v-656dfe6a>Last updated:</span> <span class="time" data-v-656dfe6a>2022-03-14, 16:16:09 UTC</span></p></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.96c8d89b.js" defer></script><script src="/assets/js/11.9794c269.js" defer></script><script src="/assets/js/126.1356508c.js" defer></script><script src="/assets/js/30.d8319f9e.js" defer></script><script src="/assets/js/28.ec4f1cef.js" defer></script>
  </body>
</html>
